(this.webpackJsonphotstuff=this.webpackJsonphotstuff||[]).push([[0],{181:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(64),o=n.n(a),c=(n(181),n(3)),r=n(8),s=n(34),d=n(18),u=n(9),l={defaultTempDegC:23,defaultCapJPerDegK:10,defaultPowerGenW:0,canvasHeightPerc:.7,editorWidthPerc:.3,defaultTotalTimeSeconds:60,defaultTimeStepSeconds:.1,defaultNodeRadius:20,defaultResistanceDegKPerW:10,defaultConnectionKind:"bi",newNodeNamePrefix:"New Node",zoomSensitivity:1e3,minZoom:.25,maxZoom:5,minRadiusPx:20,maxRadiusPx:40,activeNodeOutlineWidthPx:5,tabHeightPx:25,plotHeightBufferPx:10,tableDeleteCellWidthPerc:.1,tableDeleteCellMinWidthPx:40,plotMargin:{left:10,right:20,top:20,bottom:20}},f=u.a.div.withConfig({displayName:"style__StyledTableWrapper",componentId:"sc-em5pgb-0"})(["width:100%;"]),b=u.a.div.withConfig({displayName:"style__StyledTable",componentId:"sc-em5pgb-1"})(["width:100%;border-collapse:collapse;"]),m=u.a.div.withConfig({displayName:"style__StyledTableBody",componentId:"sc-em5pgb-2"})(["width:100%;"]),p=u.a.button.withConfig({displayName:"style__StyledAddButton",componentId:"sc-em5pgb-3"})([""]),v=u.a.div.withConfig({displayName:"style__StyledRow",componentId:"sc-em5pgb-4"})(["display:inline-flex;align-items:center;min-width:100%;position:sticky;top:",";background:",";"],(function(e){var t=e.heightOffsetPx;return t?"".concat(t,"px"):"0px"}),(function(e){return e.isActive?"rgba(112, 165, 255, 0.2)":"none"})),h=u.a.div.withConfig({displayName:"style__StyledCell",componentId:"sc-em5pgb-5"})(["display:inline-flex;justify-content:center;align-items:center;border:1px solid #ddd;height:2em;width:",";min-width:",";"],(function(e){var t=e.width;return"".concat(100*t,"%")}),(function(e){var t=e.minWidth;return t?"".concat(t,"px"):"none"})),j=Object(u.a)(h).withConfig({displayName:"style__StyledDeleteCell",componentId:"sc-em5pgb-6"})(["cursor:pointer;user-select:none;min-width:40px;&:hover{background:black;}"]),x=u.a.div.withConfig({displayName:"style__StyledHeaderWrapper",componentId:"sc-em5pgb-7"})(["display:flex;width:100%;height:100%;position:sticky;top:",";z-index:1;"],(function(e){var t=e.heightOffsetPx;return t?"".concat(t,"px"):"0px"})),g=u.a.div.withConfig({displayName:"style__StyledColHeader",componentId:"sc-em5pgb-8"})(["display:inline-flex;width:",";min-width:",";justify-content:center;align-items:center;font-weight:bold;border:1px solid lightgrey;cursor:pointer;user-select:none;position:relative;background:white;border-bottom:1px solid black;"],(function(e){var t=e.width;return"".concat(100*t,"%")}),(function(e){var t=e.minWidth;return t?"".concat(t,"px"):"none"})),O=u.a.div.withConfig({displayName:"style__StyledColText",componentId:"sc-em5pgb-9"})(["font-size:0.8em;padding:1em;"]),y=u.a.div.withConfig({displayName:"style__StyledSortIcon",componentId:"sc-em5pgb-10"})(["position:absolute;bottom:0;right:50%;transform:translate(50%);"]),w=n(2);function C(e){var t=e.columns,n=e.sortState,i=e.setSortState,a=n?"ASC"===n.direction?"\u25b2":"\u25bc":"";return Object(w.jsxs)(x,{heightOffsetPx:l.tabHeightPx,children:[t.map((function(e){var t=n&&n.key===e.key;return Object(w.jsxs)(g,{onClick:function(){var a;i({key:e.key,direction:t&&n?(a=n.direction,"ASC"===a?"DESC":"ASC"):"ASC"})},width:e.width,minWidth:e.minWidthPx,children:[Object(w.jsx)(O,{children:e.text}),Object(w.jsx)(y,{children:t?a:""})]},e.key.toString())})),Object(w.jsx)(g,{width:l.tableDeleteCellWidthPerc,minWidth:l.tableDeleteCellMinWidthPx,style:{cursor:"unset"}})]})}var k=n(57),S=u.a.select.withConfig({displayName:"DropDownTableCell__StyledSelect",componentId:"sc-qr2hm7-0"})(["display:inline-flex;width:100%;height:100%;background:unset;"]);function D(e){var t;return Object(w.jsx)(S,{value:null===(t=e.setOption)||void 0===t?void 0:t.id,onChange:function(t){var n=t.target.value,i=e.options.find((function(e){return e.id===n}));void 0!==i&&e.onSelectOption(e.rowId,i)},children:e.options.map((function(e){return Object(w.jsx)("option",{value:e.id,children:e.text},e.id)}))})}var P=u.a.input.withConfig({displayName:"style__StyledInput",componentId:"sc-13tzkm8-0"})(["display:inline-block;border:none;width:100%;height:100%;text-align:center;padding:0;background:unset;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;margin:0;}"]);function N(e){var t=Object(i.useState)(e.initialValue.toString()),n=Object(r.a)(t,2),a=n[0],o=n[1],c=e.initialValue,s=e.onBlur,d=e.getNewValue;var u=Object(i.useCallback)((function(e){var t=d(e);e.target.value!==c.toString()&&(void 0!==t?(o(t.toString()),s(t)):(o(c.toString()),s(c)))}),[d,c,s]);return Object(w.jsx)(P,{type:"text",value:a,onChange:function(e){var t=e.target.value;void 0!==t&&o(t)},onBlur:u,onKeyDown:function(e){"Escape"===e.key||e.key}})}function W(e){return Object(w.jsx)(N,{initialValue:e.initialValue,onBlur:e.onBlur,getNewValue:function(e){return e.target.value}})}function T(e){return Object(w.jsx)(W,{initialValue:e.initialVal,onBlur:e.onBlur})}function A(e){var t=e.target.value,n=parseFloat(e.target.value);if(void 0!==t&&!isNaN(n))return n}function K(e){return Object(w.jsx)(N,{initialValue:e.initialValue,onBlur:e.onBlur,getNewValue:A})}function R(e){return Object(w.jsx)(K,{initialValue:e.initialVal,onBlur:e.onBlur})}var _=u.a.div.withConfig({displayName:"BooleanTableCell__StyledCheckbox",componentId:"sc-1aoxdk6-0"})(["display:inline-flex;width:100%;height:100%;justify-content:center;align-items:center;cursor:pointer;user-select:none;"]);function I(e){var t=Object(i.useState)(void 0!==e.initialIsActive&&e.initialIsActive),n=Object(r.a)(t,2),a=n[0],o=n[1];return Object(w.jsxs)(_,{tabIndex:0,onKeyUp:function(t){"Enter"===t.key&&(o(!a),e.onClick(!a))},onClick:function(){o(!a),e.onClick(!a)},children:["\xa0",a?e.showWhenActive:""]})}function M(e){var t=e.row,n=e.col,i=e.options,a=e.initiallySetOption,o=e.onUpdateRow,r=t[n.key];return i&&i.length>0&&n.onSelectOption?Object(w.jsx)(D,{rowId:t.id,options:i,setOption:a,onSelectOption:n.onSelectOption}):"string"===typeof r?Object(w.jsx)(T,{initialVal:r,onBlur:function(e){return o(Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n.key,e)))}}):"number"===typeof r&&"number"===typeof t[n.key]?Object(w.jsx)(R,{initialVal:r,onBlur:function(e){return o(Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n.key,e)))}}):"boolean"===typeof r?Object(w.jsx)(I,{initialIsActive:r,onClick:function(e){return o(Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n.key,e)))},showWhenActive:"\u2705"}):Object(w.jsx)(w.Fragment,{})}function E(e){var t=Object(i.useState)(e.default),n=Object(r.a)(t,2),a=n[0],o=n[1];return[a,o,function(e,t){return"ASC"===a.direction?e[a.key]>t[a.key]||e[a.key]===t[a.key]&&e.id>t.id?1:-1:e[a.key]>t[a.key]?-1:e[a.key]===t[a.key]?e.id>t.id?1:-1:1}]}function B(e){return Object(w.jsx)(j,{tabIndex:0,onKeyUp:function(t){"Enter"===t.key&&e.onDeleteRow(e.row)},width:l.tableDeleteCellWidthPerc,minWidth:l.tableDeleteCellMinWidthPx,onClick:function(){return e.onDeleteRow(e.row)},children:"\u274c"})}var V={key:"name",direction:"ASC"},L=[{key:"name",text:"Name",width:.2,minWidthPx:100},{key:"temperatureDegC",text:"Temp degC",width:.2,minWidthPx:100},{key:"capacitanceJPerDegK",text:"Capacitance J/degK",width:.2,minWidthPx:100},{key:"powerGenW",text:"Power Gen W",width:.15,minWidthPx:80},{key:"isBoundary",text:"Boundary?",width:.15,minWidthPx:80}];function J(e){var t=e.rows,n=e.onUpdateRow,i=e.onDeleteRow,a=e.onAddButton,o=E({default:V}),c=Object(r.a)(o,3),s=c[0],d=c[1],u=c[2],j=t.sort(u).map((function(e){return Object(w.jsxs)(v,{heightOffsetPx:l.tabHeightPx,isActive:e.isActive,children:[L.map((function(t){var i=Object(w.jsx)(M,{row:e,col:t,onUpdateRow:n});return Object(w.jsx)(h,{width:t.width,minWidth:t.minWidthPx,children:i},t.key)})),Object(w.jsx)(B,{row:e,onDeleteRow:function(){return i(e)}})]},e.id)}));return Object(w.jsx)(f,{children:Object(w.jsxs)(b,{children:[Object(w.jsx)(C,{columns:L,sortState:s,setSortState:d}),Object(w.jsx)(m,{children:j}),Object(w.jsx)(p,{onClick:a,children:"+"})]})})}var H=n(28),U={key:"sourceName",direction:"ASC"},z=[{id:"bi",text:"Bidirectional"},{id:"uni",text:"Unidirectional"},{id:"rad",text:"Radiative"}];function G(e){var t=E({default:U}),n=Object(r.a)(t,3),a=n[0],o=n[1],s=n[2],d=Object(i.useCallback)((function(t,n){var i=e.rows.find((function(e){return e.id===t})),a=e.nodes.find((function(e){return e.id===n.id}));i&&a&&a.id!==i.target.id&&e.onUpdateRow(Object(c.a)(Object(c.a)({},i),{},{source:a,sourceName:a.name}))}),[e]),u=Object(i.useCallback)((function(t,n){var i=e.rows.find((function(e){return e.id===t})),a=e.nodes.find((function(e){return e.id===n.id}));i&&a&&a.id!==i.source.id&&e.onUpdateRow(Object(c.a)(Object(c.a)({},i),{},{target:a,targetName:a.name}))}),[e]),j=Object(i.useCallback)((function(t,n){var i=e.rows.find((function(e){return e.id===t}));i&&e.onUpdateRow(Object(c.a)(Object(c.a)({},i),{},{kind:n.id}))}),[e]),x=e.nodes.map((function(e){return{id:e.id,text:e.name}})),g=Object(i.useMemo)((function(){return[{text:"Source",key:"sourceName",width:.25,minWidthPx:100,options:x,onSelectOption:d},{text:"Target",key:"targetName",width:.25,minWidthPx:100,options:x,onSelectOption:u},{text:"Resistance degK/W",key:"resistanceDegKPerW",width:.25,minWidthPx:100},{text:"Kind",key:"kind",width:.25,minWidthPx:100,options:z,onSelectOption:j}]}),[x,j,d,u]),O=e.nodes.filter((function(e){return e.isActive})).map((function(e){return e.id})),y=e.rows.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:O.includes(e.source.id)||O.includes(e.target.id)})})).sort(s).map((function(t){var n=g.map((function(n){function i(e){return Object(w.jsx)(h,{width:n.width,minWidth:n.minWidthPx,children:e},n.key)}if(n.options){var a,o=null===(a=n.options)||void 0===a?void 0:a.find((function(e){return e.id===t[n.key]||e.text===t[n.key]})),c=o?[o].concat(Object(H.a)(function(e,t,n,i,a){var o=a.filter((function(e){return!(e.source.id===n&&e.target.id===i)}));return"sourceName"===e?t.filter((function(e){return e.id!==i})).filter((function(e){return!o.some((function(t){return t.source.id===e.id&&t.target.id===i||t.source.id===i&&t.target.id===e.id}))})):"targetName"===e?t.filter((function(e){return e.id!==n})).filter((function(e){return!o.some((function(t){return t.source.id===n&&t.target.id===e.id||t.source.id===e.id&&t.target.id===n}))})):t}(n.key,n.options||[],t.source.id,t.target.id,e.rows).filter((function(e){return e.id!==o.id})))):[];return i(Object(w.jsx)(M,{row:t,col:n,options:c,initiallySetOption:o,onUpdateRow:e.onUpdateRow}))}return i(Object(w.jsx)(M,{row:t,col:n,onUpdateRow:e.onUpdateRow}))}));return Object(w.jsxs)(v,{heightOffsetPx:l.tabHeightPx,isActive:t.isActive,children:[n,Object(w.jsx)(B,{row:t,onDeleteRow:function(){return e.onDeleteRow(t)}})]},t.id)}));return Object(w.jsx)(f,{children:Object(w.jsxs)(b,{children:[Object(w.jsx)(C,{columns:g,sortState:a,setSortState:o}),Object(w.jsx)(m,{children:y}),Object(w.jsx)(p,{onClick:e.onAddButton,children:"+"})]})})}var F=u.a.div.withConfig({displayName:"Tabs__StyledTabsWrapper",componentId:"sc-1lldz8u-0"})(["display:inline-flex;width:100%;flex-direction:column;overflow:auto;position:relative;"]),q=u.a.div.withConfig({displayName:"Tabs__StyledTabs",componentId:"sc-1lldz8u-1"})(["display:inline-flex;width:100%;height:","px;justify-content:space-evenly;position:sticky;top:0;background:white;box-sizing:border-box;z-index:1;"],l.tabHeightPx),Y=u.a.div.withConfig({displayName:"Tabs__StyledTab",componentId:"sc-1lldz8u-2"})(["display:inline-flex;width:",";cursor:pointer;text-decoration:none;align-items:center;background:linear-gradient( 90deg,rgba(46,228,233,1) 0%,rgba(46,228,233,1) 40%,rgba(255,0,230,1) 80%,rgba(85,9,121,1) 100% );border-radius:5px 5px 0 0;border:1px solid black;border-bottom:2px solid black;&:hover,&:focus{opacity:0.7;}"],(function(e){var t=e.width;return"".concat(100*t,"%")})),Z=u.a.div.withConfig({displayName:"Tabs__StyledTabText",componentId:"sc-1lldz8u-3"})(["font-size:1.1em;padding:0.2em 0.5em;&.active{font-weight:bold;}"]),X=u.a.div.withConfig({displayName:"Tabs__StyledInnerContent",componentId:"sc-1lldz8u-4"})(["background:white;position:relative;"]);function Q(e){var t=Object(i.useState)(0),n=Object(r.a)(t,2),a=n[0],o=n[1];return Object(w.jsxs)(F,{children:[e.tabs.length>1&&Object(w.jsx)(q,{children:e.tabs.map((function(e,t){return Object(w.jsx)(Y,{tabIndex:0,onClick:function(){return o(t)},onKeyUp:function(e){"Enter"===e.key&&o(t)},width:e.width,children:Object(w.jsx)(Z,{className:t===a?"active":"",children:e.text})},e.text)}))}),Object(w.jsx)(X,{topLeftRounded:e.tabs.length<=1,children:e.tabs.filter((function(e,t){return t===a}))[0].component})]})}var $=Object.freeze({x:0,y:0});function ee(e,t){return{x:e.x-t.x,y:e.y-t.y}}function te(e,t){return{x:e.x/t,y:e.y/t}}var ne=Object(d.makeNode)({name:"1: Click to select",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),ie=Object(c.a)(Object(c.a)({},ne),{},{center:{x:100,y:100},isActive:!1,textDirection:"D"}),ae=Object(d.makeNode)({name:"2: Shift-click to toggle selection",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),oe=Object(c.a)(Object(c.a)({},ae),{},{center:{x:300,y:150},isActive:!0,textDirection:"D"}),ce=Object(d.makeNode)({name:"3: Click+drag to move",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),re=Object(c.a)(Object(c.a)({},ce),{},{center:{x:500,y:100},isActive:!1,textDirection:"D"}),se=Object(d.makeNode)({name:"4: Double click space to create node",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),de=Object(c.a)(Object(c.a)({},se),{},{center:{x:700,y:150},isActive:!1,textDirection:"U"}),ue=Object(d.makeNode)({name:"5: Alt+click+drag+release to connect",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),le=Object(c.a)(Object(c.a)({},ue),{},{center:{x:200,y:300},isActive:!1,textDirection:"D"}),fe=Object(d.makeNode)({name:"6: Delete to remove selected",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),be=Object(c.a)(Object(c.a)({},fe),{},{center:{x:400,y:350},isActive:!0,textDirection:"D"}),me=Object(d.makeNode)({name:"7: Double click node to move text",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),pe=Object(c.a)(Object(c.a)({},me),{},{center:{x:600,y:300},isActive:!1,textDirection:"D"}),ve=Object(d.makeNode)({name:"8: Change parameters in tables",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),he=Object(c.a)(Object(c.a)({},ve),{},{center:{x:800,y:350},isActive:!1,textDirection:"U"}),je=Object(d.makeNode)({name:"9: Adjust time & run model below tables",temperatureDegC:85,capacitanceJPerDegK:10,powerGenW:0,isBoundary:!1}),xe=[ie,oe,re,de,le,be,pe,he,Object(c.a)(Object(c.a)({},je),{},{center:{x:500,y:500},isActive:!0,textDirection:"D"})],ge=[Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:ne,target:ae,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:ne.name,targetName:ae.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:ae,target:ce,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:ae.name,targetName:ce.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:ce,target:se,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:ce.name,targetName:se.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:se,target:ue,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:se.name,targetName:ue.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:ue,target:fe,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:ue.name,targetName:fe.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:fe,target:me,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:fe.name,targetName:me.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:me,target:ve,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:me.name,targetName:ve.name}),Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:ve,target:je,resistanceDegKPerW:10,kind:"bi"})),{},{sourceName:ve.name,targetName:je.name})],Oe={offset:$,scale:1},ye={output:void 0,timing:{timeStepS:l.defaultTimeStepSeconds,totalTimeS:l.defaultTotalTimeSeconds},nodes:xe,connections:ge,canvasViewState:Oe,savedCanvasState:Oe},we=u.a.div.withConfig({displayName:"ModelControls__StyledModelControlsWrapper",componentId:"sc-1sx26x7-0"})(["display:flex;flex-direction:column;height:100%;width:100%;justify-content:center;align-items:center;border-top:3px solid black;padding-top:1em;"]),Ce=u.a.button.withConfig({displayName:"ModelControls__StyledButton",componentId:"sc-1sx26x7-1"})(["margin-top:5px;margin-bottom:5px;"]),ke=u.a.div.withConfig({displayName:"ModelControls__StyledImport",componentId:"sc-1sx26x7-2"})([""]),Se=u.a.div.withConfig({displayName:"ModelControls__StyledTimeControls",componentId:"sc-1sx26x7-3"})([""]),De=u.a.div.withConfig({displayName:"ModelControls__StyledTimeControl",componentId:"sc-1sx26x7-4"})(["display:flex;width:100%;align-items:center;justify-content:space-between;margin:0.5em;"]),Pe=u.a.div.withConfig({displayName:"ModelControls__StyledInputWrapper",componentId:"sc-1sx26x7-5"})(["max-width:3em;height:1.5em;"]),Ne=u.a.label.withConfig({displayName:"ModelControls__StyledLabel",componentId:"sc-1sx26x7-6"})(["margin-right:0.2em;"]);function We(e){var t=e.onRunModel,n=e.timing,a=e.setTiming,o=Object(i.useState)(""),s=Object(r.a)(o,2),d=s[0],u=s[1];return Object(w.jsxs)(we,{children:[Object(w.jsxs)(Se,{children:[Object(w.jsxs)(De,{children:[Object(w.jsx)(Ne,{children:"Run Time [s]:"}),Object(w.jsx)(Pe,{children:Object(w.jsx)(K,{initialValue:n.totalTimeS,onBlur:function(e){return a(Object(c.a)(Object(c.a)({},n),{},{totalTimeS:e}))}})})]}),Object(w.jsxs)(De,{children:[Object(w.jsx)(Ne,{children:"Time Step [s]:"}),Object(w.jsx)(Pe,{children:Object(w.jsx)(K,{initialValue:n.timeStepS,onBlur:function(e){return a(Object(c.a)(Object(c.a)({},n),{},{timeStepS:e}))}})})]})]}),Object(w.jsx)(Ce,{onClick:t,children:"Run Model"}),Object(w.jsx)(Ce,{onClick:function(){return navigator.clipboard.writeText(JSON.stringify(e.appState))},children:"Copy Model to ClipBoard"}),Object(w.jsxs)(ke,{children:[Object(w.jsx)("input",{value:d,onChange:function(e){return u(e.target.value)}}),Object(w.jsx)(Ce,{onClick:function(){e.setAppState(JSON.parse(d)),u("")},children:"Import Model"})]}),Object(w.jsx)(Ce,{onClick:function(){return e.setAppState(ye)},children:"Reset to Tutorial"})]})}var Te=u.a.div.withConfig({displayName:"Sidebar__StyledEditor",componentId:"sc-1mf7iys-0"})(["height:","px;width:","px;border-left:3px solid black;"],(function(e){return e.height}),(function(e){return e.width})),Ae=u.a.div.withConfig({displayName:"Sidebar__StyledTables",componentId:"sc-1mf7iys-1"})(["display:inline-flex;width:100%;height:50%;"]),Ke=u.a.div.withConfig({displayName:"Sidebar__StyledModelControlsWrapper",componentId:"sc-1mf7iys-2"})(["display:inline-flex;width:100%;"]);function Re(e){var t=Object(w.jsx)(J,{rows:e.appNodes,onUpdateRow:function(t){return e.updateNodes([t],!1)},onDeleteRow:function(t){return e.deleteNodes([t.id])},onAddButton:e.onAddNode}),n=Object(w.jsx)(G,{rows:e.appConnections,nodes:e.appNodes,onUpdateRow:function(t){return e.updateConnections([t])},onDeleteRow:function(t){return e.deleteConnections([t.id])},onAddButton:e.onAddConnection});return Object(w.jsxs)(Te,{width:e.width,height:e.height,children:[Object(w.jsx)(Ae,{children:Object(w.jsx)(Q,{tabs:[{text:"Nodes",component:t,width:.5},{text:"Connections",component:n,width:.5}]})}),Object(w.jsx)(Ke,{children:Object(w.jsx)(We,{appState:e.appState,setAppState:e.setAppState,onRunModel:e.onRunModel,timing:e.timing,setTiming:e.setTiming})})]})}var _e,Ie,Me=n(171),Ee=n(339),Be=n(340),Ve=n(344),Le=n(168),Je=n(169),He=n(75),Ue=n(72);function ze(e){var t=e.plotDimensions,n=e.plotData,i=e.lines,a=e.xAxisKey,o=e.xLabel,c=e.yLabel;return Object(w.jsx)(Ee.a,{height:t.height,width:t.width,className:"chart",children:Object(w.jsxs)(Be.a,{height:t.height,width:t.width,margin:t.margin,data:n,children:[Object(w.jsx)(Ve.a,{strokeDasharray:"3 3"}),Object(w.jsx)(Le.a,{dataKey:a,label:{value:o,position:"center",dy:20}}),Object(w.jsx)(Je.a,{label:{value:c,position:"center",angle:-90,dx:-20}}),Object(w.jsx)(He.a,{}),Object(w.jsx)(Ue.a,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{paddingLeft:"10px"}}),i]})})}var Ge=["#2ecc71","#3498db","#9b59b6","#e74c3c","#e67e22","#34495e","#16a085"],Fe=u.a.div(_e||(_e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n\n  .chart {\n    width: 60% !important;\n    max-width: 900px;\n\n    @media only screen and (max-width: 600px) {\n      width: 90% !important;\n      touch-action: pan-y;\n    }\n  }\n"]))),qe=u.a.div(Ie||(Ie=Object(s.a)(["\n  width: 100%;\n  height: ","px;\n  border-top: 3px solid black;\n  margin: 0;\n  padding: 0;\n"])),(function(e){return e.height}));function Ye(e){var t=Math.floor(Math.log10(e.totalTimeS)),n=Math.pow(10,t-1);var i=e.timeSeriesS.length<400,a=[],o=[];return e.timeSeriesS.forEach((function(t,c){if(i||(d=t,0===Math.abs(d%n))){var r={time:t},s={time:t};e.nodeResults.forEach((function(e){r[e.node.name]=e.tempDegC[c]})),e.connectionResults.forEach((function(e){s["".concat(e.connection.source.name," to ").concat(e.connection.target.name)]=e.heatTransferW[c]})),a.push(r),o.push(s)}var d})),[a,o]}function Ze(e){var t=e.modelOutput&&e.modelOutput.nodeResults.length>0?e.modelOutput:d.emptyOutput,n=Ye(t),a=Object(r.a)(n,2),o=a[0],c=a[1],s=Object(i.useMemo)((function(){return t.connectionResults.map((function(e,t){return Object(w.jsx)(Me.a,{type:"monotone",dataKey:"".concat(e.connection.source.name," to ").concat(e.connection.target.name),stroke:Ge[t],activeDot:{r:8},isAnimationActive:!1},e.connection.id)}))}),[t.connectionResults]),u=Object(i.useMemo)((function(){return t.nodeResults.map((function(e,t){return Object(w.jsx)(Me.a,{type:"monotone",dataKey:e.node.name,stroke:Ge[t],activeDot:{r:8},isAnimationActive:!1},e.node.id)}))}),[t.nodeResults]),l=Object(w.jsx)(ze,{plotDimensions:e.plotDimensions,plotData:o,lines:u,xAxisKey:"time",xLabel:"Time [s]",yLabel:"Temperature [degC]"}),f=Object(w.jsx)(ze,{plotDimensions:e.plotDimensions,plotData:c,lines:s,xAxisKey:"time",xLabel:"Time [s]",yLabel:"Heat Transfer [Watts]"});return Object(w.jsx)(qe,{height:e.plotDimensions.height,width:e.plotDimensions.width,children:Object(w.jsx)(Fe,{children:Object(w.jsx)(Q,{tabs:[{text:"Temperature",component:l,width:.5},{text:"Heat Transfer",component:f,width:.5}]})})})}var Xe=l.activeNodeOutlineWidthPx,Qe=l.minRadiusPx,$e=l.maxRadiusPx,et=Math.floor((Qe+$e)/2);function tt(e,t,n,i,a,o,c,r){!function(e,t,n,i){e.save(),e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI),e.fillStyle=i,e.fill(),e.closePath(),e.restore()}(e,n,i,a),o&&function(e,t,n,i){e.save(),e.beginPath(),e.arc(t.x,t.y,n-Xe/2,0,2*Math.PI),e.lineWidth=Xe,e.strokeStyle=i,e.stroke(),e.closePath(),e.restore()}(e,n,i,"black"),c&&function(e,t,n){e.save(),e.lineWidth=2,e.fillStyle="#FFFFFF",e.translate(t.x,t.y),e.rotate(Math.PI/4),e.beginPath(),e.moveTo(-n,0),e.lineTo(n,0),e.stroke();for(var i=0;i+4.5<n;){i+=4.5;var a=n*Math.sin(Math.acos(i/n));e.moveTo(-a-1,i),e.lineTo(a+1,i),e.stroke(),e.moveTo(-a-1,-i),e.lineTo(a+1,-i),e.stroke()}e.closePath(),e.beginPath(),e.arc(0,0,n+2,0,2*Math.PI,!1),e.arc(0,0,n,0,2*Math.PI,!0),e.fill(),e.restore()}(e,n,i),function(e,t,n,i,a){e.save(),e.font="14px Helvetica";var o=e.measureText(t),c=o.width;e.translate(n.x,n.y),"D"===a?e.fillText(t,-c/2,o.actualBoundingBoxAscent+i+2):"R"===a?e.fillText(t,i+2,o.actualBoundingBoxAscent/2):"U"===a?e.fillText(t,-c/2,-(o.actualBoundingBoxDescent+i+2)):e.fillText(t,-(c+i+2),o.actualBoundingBoxAscent/2),e.restore()}(e,t,n,i,r)}function nt(e,t,n,i,a,o){"bi"===o?function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e.save(),e.beginPath(),e.strokeStyle=i,e.lineWidth=2;var c=9,r=4,s=0,d=n.x-t.x,u=n.y-t.y,l=Math.atan2(u,d),f=Math.sqrt(d*d+u*u)-o;e.translate(t.x,t.y),e.rotate(l),e.beginPath(),e.moveTo(a,s),e.lineTo(f,s),e.moveTo(f-c,r+s),e.lineTo(f,s),e.lineTo(f-c,-(r-s)),e.moveTo(f,-s),e.lineTo(a,-s),e.moveTo(a+c,-(r+s)),e.lineTo(a,-s),e.lineTo(a+c,r-s),e.stroke(),e.closePath(),e.restore()}(e,t,i,"black",n,a):function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e.save(),e.beginPath(),e.strokeStyle=i,e.lineWidth=2;var c=9,r=4,s=n.x-t.x,d=n.y-t.y,u=Math.atan2(d,s),l=Math.sqrt(s*s+d*d)-o;e.translate(t.x,t.y),e.rotate(u),e.beginPath(),e.moveTo(a,0),e.lineTo(l,0),e.moveTo(l-c,-r),e.lineTo(l,0),e.lineTo(l-c,r),e.stroke(),e.closePath(),e.restore()}(e,t,i,"black",n,a)}function it(e,t,n){var i=e.x-t.x,a=e.y-t.y;return Math.pow(i,2)+Math.pow(a,2)<=Math.pow(n,2)}function at(e,t){var n={x:e.pageX,y:e.pageY},i=t.getBoundingClientRect();return ee(n,{x:i.left,y:i.top})}function ot(e,t){if(t.context){var n=at(e,t.context.canvas);return i=n,a=t.canvasViewState.offset,o=t.canvasViewState.scale,ee(te(i,o),a)}return $;var i,a,o}function ct(e,t){var n=Math.min.apply(Math,Object(H.a)(t)),i=Math.max.apply(Math,Object(H.a)(t));return n===i?et:(e-n)/(i-n)*($e-Qe)+Qe}var rt=l.maxZoom,st=l.minZoom,dt=l.zoomSensitivity;var ut,lt,ft=u.a.div.withConfig({displayName:"Controls__StyledButtons",componentId:"sc-1s5x3rc-0"})(["position:absolute;bottom:0;left:0;display:flex;flex-direction:column;"]),bt=u.a.button.withConfig({displayName:"Controls__StyledButton",componentId:"sc-1s5x3rc-1"})(["margin:0.2em;"]);function mt(e){return Object(w.jsxs)(ft,{children:[Object(w.jsx)(bt,{onClick:function(){return e.canvasState.context&&e.setCanvasViewState({offset:$,scale:1})},children:"Reset View"}),Object(w.jsx)(bt,{onClick:function(){return e.canvasState.context&&e.setCanvasViewState({offset:e.savedCanvasState.offset,scale:e.savedCanvasState.scale})},children:"Reset View to Saved"}),Object(w.jsx)(bt,{onClick:function(){e.setSavedCanvasState({offset:e.canvasState.canvasViewState.offset,scale:e.canvasState.canvasViewState.scale})},children:"Save View"})]})}var pt=u.a.div(ut||(ut=Object(s.a)(["\n  display: block;\n  max-height: 100%;\n  position: relative;\n"]))),vt=u.a.canvas(lt||(lt=Object(s.a)(["\n  width: ",";\n  height: ",";\n"])),(function(e){var t=e.cssWidth;return"".concat(t,"px")}),(function(e){var t=e.cssHeight;return"".concat(t,"px")}));function ht(e){var t,n,a=e.canvasWidth,o=e.canvasHeight,c=e.devicePixelRatio,s=e.draw,d=e.onMouseDown,u=e.handleDoubleClick,l=e.canvasViewState,f=e.setCanvasViewState,b=e.savedCanvasViewState,m=e.setSavedCanvasViewState,p=e.setKeyboardActive,v=Object(i.useRef)(null);t=v,n=p,Object(i.useEffect)((function(){var e=function(e){var i=!!t.current&&t.current.contains(e.target);n(i)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n]);var h=function(e,t,n){var a=Object(i.useState)(null),o=Object(r.a)(a,2),c=o[0],s=o[1],d=Object(i.useRef)($),u=Object(i.useRef)($),l=Object(i.useRef)(t),f=Object(i.useCallback)((function(e){if(c){var i=at(e,c.canvas);u.current=d.current,d.current=i;var a=te(ee(d.current,u.current),t.scale),o={scale:t.scale,offset:(r=l.current.offset,s=a,{x:r.x+s.x,y:r.y+s.y})};n(o),l.current=o}var r,s}),[c,t.scale,n]),b=Object(i.useCallback)((function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",b)}),[f]),m=Object(i.useCallback)((function(e){c&&(document.addEventListener("mousemove",f),document.addEventListener("mouseup",b),d.current=at(e,c.canvas))}),[c,f,b]);return Object(i.useLayoutEffect)((function(){function i(e){if(e.preventDefault(),c){var i=at(e,c.canvas);u.current=d.current,d.current=i;var a=1-e.deltaY/dt,o=t.scale*a;if(o>rt||o<st)return;var r=ee(te(d.current,t.scale),te(d.current,o)),s={offset:ee(l.current.offset,r),scale:o};n(s),l.current=s}}var a=e.current;if(a)return l.current=t,a.addEventListener("wheel",i),function(){return a.removeEventListener("wheel",i)}}),[e,t,c,n]),[c,s,m]}(v,l,f),j=Object(r.a)(h,3),x=j[0],g=j[1],O=j[2];return Object(i.useLayoutEffect)((function(){if(v.current){var e=v.current.getContext("2d");g(e)}}),[g]),Object(i.useLayoutEffect)((function(){x&&(x.canvas.width=a*c,x.canvas.height=o*c,x.scale(l.scale*c,l.scale*c),x.translate(l.offset.x,l.offset.y),s(x))}),[o,a,x,c,s,l.offset.x,l.offset.y,l.scale]),Object(w.jsxs)(pt,{children:[Object(w.jsx)(mt,{setCanvasViewState:f,canvasState:{context:x,canvasViewState:l,canvasWidth:a,canvasHeight:o},savedCanvasState:b,setSavedCanvasState:m}),Object(w.jsx)(vt,{ref:v,width:a*c,height:o*c,cssWidth:a,cssHeight:o,onMouseDown:function(e){return d(e,{context:x,canvasViewState:l,canvasWidth:a,canvasHeight:o},(function(){return O(e)}))},onDoubleClick:function(e){return u(e,{context:x,canvasViewState:l,canvasWidth:a,canvasHeight:o})}})]})}var jt=l.newNodeNamePrefix;function xt(e,t){var n=e.filter((function(e){return e.name.startsWith(jt)})).length,i=Object(d.makeNode)({name:0===n?"".concat(jt):"".concat(jt," (").concat(n+1,")"),temperatureDegC:l.defaultTempDegC,capacitanceJPerDegK:l.defaultCapJPerDegK,powerGenW:l.defaultPowerGenW,isBoundary:!1});return Object(c.a)(Object(c.a)({},i),{},{center:t,isActive:!1,textDirection:"D"})}var gt,Ot,yt,wt=l.defaultResistanceDegKPerW,Ct=l.defaultConnectionKind;function kt(e,t,n,a){var o=Object(i.useCallback)((function(e,t,n){if(n.context){var i=ot(e,n);a(n),function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e.save(),e.beginPath(),e.strokeStyle=i,e.lineWidth=2;var c=n.x-t.x,r=n.y-t.y,s=Math.atan2(r,c),d=Math.sqrt(c*c+r*r);e.translate(t.x,t.y),e.rotate(s),e.beginPath(),e.moveTo(a,0);var u=d-o;e.lineTo(u,0),e.stroke(),e.closePath(),e.restore()}(n.context,t.center,i,"grey")}}),[a]);return Object(i.useCallback)((function(i,r,s){var u=function(e){o(e,r,s)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function i(o){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i);var l=ot(o,s),f=e.find((function(n){var i=ct(n.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK})));return it(l,n.center,i)&&n.id!==r.id&&!t.some((function(e){return e.source.id===n.id&&e.target.id===r.id||e.target.id===n.id&&e.source.id===r.id}))}));if(f){var b=Object(c.a)(Object(c.a)({},Object(d.makeConnection)({source:r,target:f,resistanceDegKPerW:wt,kind:Ct})),{},{sourceName:r.name,targetName:f.name});n(b)}else a(s)}))}),[n,t,e,a,o])}function St(e,t,n,i,a,o){var r=ee(ot(e,n),i.center),s=ee(ot(t,n),r),d=Object(c.a)(Object(c.a)({},i),{},{isActive:!0,center:s}),u=i.isActive||a?o.map((function(e){var t=ee(i.center,e.center);return Object(c.a)(Object(c.a)({},e),{},{center:ee(s,t)})})):[];return[d].concat(Object(H.a)(u))}function Dt(e,t,n){return Object(i.useCallback)((function(i,a){var o=ot(i,a),c=function(e){var t,i,c,r;a.context&&(n(a),t=a.context,i=o,c=ot(e,a),r="grey",t.save(),t.beginPath(),t.fillStyle=r,t.globalAlpha=.2,t.fillRect(i.x,i.y,c.x-i.x,c.y-i.y),t.closePath(),t.beginPath(),t.strokeStyle=r,t.rect(i.x,i.y,c.x-i.x,c.y-i.y),t.stroke(),t.closePath(),t.restore())};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function n(i){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",n);var s=ot(i,a),d=e.filter((function(e){return function(e,t,n){var i=e.x<t.x&&e.y<t.y?[e,t]:[t,e],a=Object(r.a)(i,2),o=a[0],c=a[1],s=e.x<t.x&&e.y>t.y?[e,t]:[t,e],d=Object(r.a)(s,2),u=d[0],l=d[1];return o.x<=n.x&&n.x<=c.x&&o.y<=n.y&&n.y<=c.y||u.x<=n.x&&n.x<=l.x&&l.y<=n.y&&n.y<=u.y}(o,s,e.center)||e.isActive})).map((function(e){return e.id}));t(d)}))}),[e,n,t])}function Pt(e,t,n,a,o,c,r){var s=kt(e,t,n,r),d=function(e){var t=Object(i.useRef)(!1);return Object(i.useCallback)((function(n,i,a,o){var c=n.shiftKey,r=function(r){if(o.context){t.current=!0;var s=St(n,r,o,i,c,a);e(s,!r.shiftKey)}};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function s(d){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s);var u=St(n,d,o,i,c,a);e(u,!c),t.current=!1}))}),[e])}(a),u=Dt(e,o,r);return Object(i.useCallback)((function(t,n,i){var a=ot(t,n),r=e.filter((function(e){return e.isActive})),l=r.map((function(e){return e.id})),f=e.find((function(t){var n=ct(t.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK})));return it(a,t.center,n)}));if(f)t.altKey?s(t,f,n):t.shiftKey&&l.includes(f.id)?o(l.filter((function(e){return e!==f.id}))):d(t,f,r,n);else if(t.shiftKey)u(t,n);else{document.addEventListener("mouseup",(function e(n){n.clientX===t.clientX&&n.clientY===t.clientY&&c(),document.removeEventListener("mouseup",e)})),i(t)}}),[e,c,d,u,s,o])}var Nt=l.editorWidthPerc,Wt=l.canvasHeightPerc,Tt=l.plotMargin,At=l.tabHeightPx,Kt=l.plotHeightBufferPx,Rt=u.a.div(gt||(gt=Object(s.a)(["\n  display: flex;\n  height: ","px;\n  user-select: none;\n  -webkit-user-select: none; /* Chrome/Safari */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* IE10+ */\n"])),(function(e){return e.height})),_t=u.a.div(Ot||(Ot=Object(s.a)(["\n  height: ","px;\n  width: ","px;\n"])),(function(e){return e.height}),(function(e){return(1-Nt)*e.width})),It=u.a.div(yt||(yt=Object(s.a)(["\n  width: 100%;\n  height: ","px;\n"])),(function(e){return e.height}));function Mt(){var e=function(e,t){var n=i.useState((function(){var n=window.sessionStorage.getItem(t);return null===n||void 0===n?e:JSON.parse(n)})),a=Object(r.a)(n,2),o=a[0],c=a[1];return i.useEffect((function(){window.sessionStorage.setItem(t,JSON.stringify(o))}),[t,o]),[o,c]}(ye,"hotstuffAppState"),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{nodes:e})}))}),[a]),s=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{connections:e})}))}),[a]),u=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{canvasViewState:e})}))}),[a]),f=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{savedCanvasState:e})}))}),[a]),b=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{timing:e,output:void 0})}))}),[a]),m=Object(i.useCallback)((function(e){a((function(t){return Object(c.a)(Object(c.a)({},t),{},{output:e})}))}),[a]),p=function(e,t,n,a,o){var r=Object(i.useCallback)((function(n){var i=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:!1})}));i.push(Object(c.a)(Object(c.a)({},n),{},{isActive:!0})),t(i),o(void 0)}),[e,t,o]),s=Object(i.useCallback)((function(e){a([].concat(Object(H.a)(n),[e])),o(void 0)}),[n,a,o]),d=Object(i.useCallback)((function(i){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.map((function(e){return i.find((function(t){return t.id===e.id}))||(o?Object(c.a)(Object(c.a)({},e),{},{isActive:!1}):e)}));t(r);var s=n.map((function(e){var t=i.find((function(t){return e.source.id==t.id}));if(t)return Object(c.a)(Object(c.a)({},e),{},{source:t,sourceName:t.name});var n=i.find((function(t){return e.target.id==t.id}));return n?Object(c.a)(Object(c.a)({},e),{},{target:n,targetName:n.name}):e}));a(s)}),[n,e,a,t]);return[r,s,d,Object(i.useCallback)((function(i){var c=n.filter((function(e){return!i.includes(e.source.id)&&!i.includes(e.target.id)}));a(c),o(void 0);var r=e.filter((function(e){return!i.includes(e.id)}));t(r)}),[n,e,a,t,o]),Object(i.useCallback)((function(e){var t=e.map((function(e){return e.id})),i=n.filter((function(e){return!t.includes(e.id)}));a([].concat(Object(H.a)(e),Object(H.a)(i))),o(void 0)}),[n,a,o]),Object(i.useCallback)((function(e){a(n.filter((function(t){return!e.includes(t.id)}))),o(void 0)}),[n,a,o]),Object(i.useCallback)((function(n){t(e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:n.includes(e.id)})})))}),[e,t]),Object(i.useCallback)((function(){void 0!==e.find((function(e){return e.isActive}))&&t(e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:!1})})))}),[e,t])]}(n.nodes,o,n.connections,s,m),v=Object(r.a)(p,8),h=v[0],j=v[1],x=v[2],g=v[3],O=v[4],y=v[5],C=v[6],k=v[7],S=Object(i.useState)(!0),D=Object(r.a)(S,2),P=D[0],N=D[1];!function(e,t,n,a){Object(i.useEffect)((function(){var i=function(i){e&&(i.metaKey&&65===i.keyCode&&(i.preventDefault(),n(t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:!0})})))),"Backspace"!==i.key&&"Delete"!==i.key||(i.preventDefault(),a(t.filter((function(e){return e.isActive})).map((function(e){return e.id})))),27===i.keyCode&&n(t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isActive:!1})}))))};return document.addEventListener("keydown",i),function(){return document.removeEventListener("keydown",i)}}),[t,a,e,n])}(P,n.nodes,o,g);var W=function(e,t){var n=Object(i.useCallback)((function(n){e.forEach((function(t){var i=ct(t.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK}))),a=(t.temperatureDegC,e.map((function(e){return e.temperatureDegC})),"red");tt(n,t.name,t.center,i,a,t.isActive,t.isBoundary,t.textDirection)})),t.map((function(t){var i=t.source,a=t.target,o=t.kind,c=e.find((function(e){return e.id===i.id})),r=e.find((function(e){return e.id===a.id}));if(c&&r){var s=ct(c.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK}))),d=ct(r.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK})));nt(n,c.center,s,r.center,d,o)}}))}),[t,e]),a=Object(i.useCallback)((function(e){e.context&&(e.context.clearRect(-e.canvasViewState.offset.x,-e.canvasViewState.offset.y,e.canvasWidth/e.canvasViewState.scale,e.canvasHeight/e.canvasViewState.scale),n(e.context))}),[n]);return[n,a]}(n.nodes,n.connections),T=Object(r.a)(W,2),A=T[0],K=T[1],R=function(e,t,n){return Object(i.useCallback)((function(i,a){if(i.preventDefault(),!i.shiftKey){var o,r=ot(i,a),s=e.find((function(t){var n=ct(t.capacitanceJPerDegK,e.map((function(e){return e.capacitanceJPerDegK})));return it(r,t.center,n)}));if(s)n([Object(c.a)(Object(c.a)({},s),{},{textDirection:(o=s.textDirection,"D"===o?"R":"R"===o?"U":"U"===o?"L":"D")})]);else{var d=xt(e,r);t(d)}}}),[t,e,n])}(n.nodes,h,x),_=Pt(n.nodes,n.connections,j,x,C,k,K),I=function(){var e=Object(i.useState)([0,0]),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(1),c=Object(r.a)(o,2),s=c[0],d=c[1];return Object(i.useLayoutEffect)((function(){function e(){a([window.innerWidth,window.innerHeight])}function t(){var e=window.devicePixelRatio;d(void 0===e?1:e)}return window.addEventListener("resize",e),window.addEventListener("resize",t),e(),t(),function(){window.removeEventListener("resize",e),window.removeEventListener("resize",t)}}),[]),[n,s]}(),M=Object(r.a)(I,2),E=M[0],B=M[1],V=Object(r.a)(E,2),L=V[0],J=V[1],U=L,z=J,G=J*Wt,F=L*(1-Nt),q=(1-Wt)*J-At-Kt,Y=F,Z=Nt*L,X=Object(i.useMemo)((function(){return Object(w.jsx)(Ze,{plotDimensions:{height:q,width:Y,margin:Tt},modelOutput:n.output})}),[n.output,q,Y]),Q=Object(i.useCallback)((function(){h(xt(n.nodes,function(e,t,n,i){var a=n;return ee(te({x:e,y:t},2*i),a)}(F,G,n.canvasViewState.offset,n.canvasViewState.scale)))}),[h,n.canvasViewState.offset,n.canvasViewState.scale,n.nodes,G,F]),$=Object(i.useCallback)((function(){var e=function(e,t){if(!(e.length<2)){var n=void 0;return e.forEach((function(i){e.forEach((function(e){if(!n&&i.id!==e.id){var a=t.find((function(t){return t.source.id===i.id&&t.target.id===e.id})),o=t.find((function(t){return t.source.id===e.id&&t.target.id===i.id}));if(!a&&!o){var r=Object(d.makeConnection)({source:i,target:e,resistanceDegKPerW:l.defaultResistanceDegKPerW,kind:"bi"});n=Object(c.a)(Object(c.a)({},r),{},{sourceName:i.name,targetName:e.name})}}}))})),n}}(n.nodes,n.connections);void 0!==e&&j(e)}),[j,n.connections,n.nodes]);return Object(w.jsxs)(Rt,{height:J,children:[Object(w.jsxs)(_t,{height:z,width:U,children:[Object(w.jsx)(It,{height:G,children:Object(w.jsx)(ht,{canvasWidth:F,canvasHeight:G,devicePixelRatio:B,draw:A,onMouseDown:_,handleDoubleClick:R,canvasViewState:n.canvasViewState,setCanvasViewState:u,savedCanvasViewState:n.savedCanvasState,setSavedCanvasViewState:f,setKeyboardActive:N})}),X]}),Object(w.jsx)(Re,{appState:n,setAppState:a,height:J,width:Z,timing:n.timing,setTiming:b,appNodes:n.nodes,onAddNode:Q,appConnections:n.connections,onAddConnection:$,addConnection:j,updateNodes:function(e){x(e),m(void 0)},deleteNodes:g,updateConnections:function(e){O(e),m(void 0)},deleteConnections:y,onRunModel:function(){var e,t=Object(d.run)({nodes:n.nodes,connections:n.connections,timeStepS:n.timing.timeStepS,totalTimeS:n.timing.totalTimeS});(null===(e=t.errors)||void 0===e?void 0:e.length)&&t.errors.forEach((function(e){return console.error(e.message)})),m(t)}})]})}window.addEventListener("load",(function(){(function(){var e=document.createElement("div"),t=document.createElement("div");e.style.width="30px",e.style.height="30px",e.style.overflow="scroll",e.style.borderWidth="0",t.style.width="30px",t.style.height="60px",e.appendChild(t),document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),n>0})()||document.body.classList.add("force-show-scrollbars")})),o.a.render(Object(w.jsx)(i.StrictMode,{children:Object(w.jsx)(Mt,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.0fa8aa6a.chunk.js.map