{"version":3,"sources":["config.ts","components/Sidebar/EditableTable/style.ts","components/Sidebar/EditableTable/TableHeader.tsx","components/Sidebar/EditableTable/cells/DropDownTableCell.tsx","components/Sidebar/style.tsx","components/Sidebar/EditableInput.tsx","components/Sidebar/EditableStringInput.tsx","components/Sidebar/EditableTable/cells/TextTableCell.tsx","components/Sidebar/EditableNumberInput.tsx","components/Sidebar/EditableTable/cells/NumericalTableCell.tsx","components/Sidebar/EditableTable/cells/BooleanTableCell.tsx","components/Sidebar/EditableTable/TableCell.tsx","components/Sidebar/EditableTable/hooks/useSortableTable.ts","components/Sidebar/EditableTable/DeleteCell.tsx","components/Sidebar/EditableTable/NodeTable/NodeTable.tsx","components/Sidebar/EditableTable/ConnectionTable/ConnectionTable.tsx","components/Tabs/Tabs.tsx","utils/pointUtils.ts","default.ts","components/Sidebar/ModelControls.tsx","components/Sidebar/Sidebar.tsx","components/Plot/LinePlot.tsx","components/Plot/Plot.tsx","components/Canvas/canvasUtils.ts","components/Canvas/hooks/usePanZoomCanvas.ts","components/Canvas/CanvasControls.tsx","components/Canvas/ModalControls.tsx","components/Canvas/Canvas.tsx","components/Canvas/hooks/useOnClickCanvas.ts","hooks/useDraw.ts","utils/nodeConnectionUtils.ts","hooks/useAddConnection.ts","hooks/useMoveNode.ts","hooks/useMultiSelect.ts","hooks/useOnMouseDown.ts","hooks/useClickAndDragElement.ts","style.tsx","components/Modal/ConfirmationModal.tsx","components/Modal/TheoryModal.tsx","components/Modal/Modal.tsx","hooks/useOnClickOutside.ts","App.tsx","hooks/useSessionStorageState.ts","hooks/useAppStateModifiers.ts","hooks/useNodeConnectionUtils.ts","hooks/useKeyDown.ts","hooks/useDoubleClick.ts","components/Canvas/hooks/useWindowSize.ts","hooks/useResizablePanels.ts","utils/scrollBar.ts","index.tsx"],"names":["config","defaultTempDegC","defaultCapJPerDegK","defaultPowerGenW","defaultTotalTimeSeconds","defaultTimeStepSeconds","defaultNodeRadius","defaultResistanceDegKPerW","defaultConnectionKind","newNodeNamePrefix","zoomSensitivity","minZoom","maxZoom","maxZoomDelta","minRadiusPx","maxRadiusPx","activeNodeOutlineWidthPx","tabHeightPx","plotHeightBufferPx","tableDeleteCellWidthPerc","tableDeleteCellMinWidthPx","plotMargin","left","right","top","bottom","plotDomainMargin","maxPlotPoints","multiSelectKey","StyledTableWrapper","styled","div","StyledTable","StyledTableBody","StyledAddButton","button","StyledRow","heightOffsetPx","isActive","StyledCell","width","minWidth","StyledDeleteCell","StyledHeaderWrapper","StyledColHeader","StyledColText","StyledSortIcon","TableHeader","props","columns","sortState","setSortState","sortIcon","direction","map","col","isSortedCol","key","onClick","sortDirection","minWidthPx","text","toString","style","cursor","StyledSelect","select","DropDownTableCell","value","setOption","id","onChange","event","newVal","target","selectedOption","options","find","option","undefined","onSelectOption","rowId","StyledInput","input","StyledEditor","height","StyledTables","heightFrac","StyledModelControlsWrapper","EditableInput","initialValue","onBlur","getNewValue","useState","setValue","handleOnBlur","useCallback","type","onKeyDown","EditableStringInput","TextTableCell","initialVal","getFloatVal","newValueText","newValueFloat","parseFloat","isNaN","EditableNumberInput","NumericalTableCell","StyledCheckbox","BooleanTableCell","initialIsActive","setIsActive","tabIndex","onKeyUp","showWhenActive","TableCell","row","initiallySetOption","onUpdateRow","length","useSortableTable","default","first","second","DeleteCell","onDeleteRow","defaultNodeSortState","nodeColumns","NodeTable","rows","onAddButton","sortByState","tableRows","sort","tableCell","defaultConnectionSortState","connectionTypes","ConnectionTable","onSelectNewSource","connection","conn","newSourceNode","nodes","node","source","sourceName","name","onSelectNewTarget","newTargetNode","targetName","onSelectNewConnectionType","rowToUpdate","kind","nodeOptions","connectionColumns","useMemo","activeNodeIds","filter","includes","cols","makeStyledCell","colKey","selectedSourceId","selectedTargetId","connections","otherConnections","some","c","filterConnectionOptions","opt","StyledTabsWrapper","StyledTabs","StyledTab","StyledTabText","StyledInnerContent","Tabs","activeIdx","setActiveIdx","tabs","tab","idx","className","topLeftRounded","_","component","ORIGIN","Object","freeze","x","y","diffPoints","p1","p2","scalePoint","scale","jerryNode","makeNode","temperatureDegC","capacitanceJPerDegK","powerGenW","isBoundary","jerryAppNode","center","textDirection","bedNode","bedAppNode","airNode","defaultNodes","defaultConnections","makeConnection","resistanceDegKPerW","defaultCanvasViewState","offset","defaultModalState","visible","defaultAppState","output","timing","timeStepS","totalTimeS","canvasViewState","savedCanvasState","panelSizes","editorWidthFraction","canvasHeightFraction","tableHeightFraction","StyledButton","StyledImport","StyledTimeControls","StyledTimeControl","StyledInputWrapper","StyledLabel","label","ModelControls","appState","setAppState","setModalState","onRunModel","setTiming","stagedAppState","setStagedAppState","newTotalTimeS","newTimeStepS","navigator","clipboard","writeText","JSON","stringify","parse","prev","onConfirm","confirmText","Sidebar","onAddNode","onAddConnection","updateNodes","deleteNodes","updateConnections","deleteConnections","nodeTable","connectionTable","StyledToolTip","StyledToolTipTitle","StyledToolTipItem","color","StyledToolTipValue","after","CustomTooltip","active","payload","sortedPayload","a","b","item","LinePlot","plotDimensions","plotData","lines","xAxisKey","xLabel","yLabel","yDomain","unit","LineChart","margin","data","CartesianGrid","strokeDasharray","XAxis","dataKey","position","dy","YAxis","domain","angle","dx","Tooltip","content","Legend","layout","verticalAlign","align","wrapperStyle","paddingLeft","paddingBottom","colors","StyledCharts","StyledPlot","roundToNearestTenth","Math","round","plotShape","lowerMag","floor","log10","divisibleBy","pow","includeAll","timeSeriesS","tempsAtAllTimes","minTemp","maxTemp","heatTransfersAtAllTimes","minHeatTransfer","maxHeatTransfer","forEach","t","val","abs","temp","time","ht","nodeResults","nodeResult","tempVal","tempDegC","connectionResults","connectionResult","heatTransferVal","heatTransferW","push","Plot","modelHasOutput","modelOutput","res","emptyOutput","tempPlotData","tempDomain","heatTransferPlotData","heatTransferDomain","yTempDomain","ceil","yHeatTransferDomain","heatTransferLines","Line","stroke","activeDot","r","isAnimationActive","tempLines","tempPlot","heatTransferPlot","DEFAULT_RADIUS","drawNode","context","radius","save","beginPath","arc","PI","fillStyle","fill","closePath","restore","drawCircle","lineWidth","strokeStyle","drawCircleOutline","translate","rotate","moveTo","lineTo","h","newRadius","sin","acos","drawHashPattern","font","textMetrics","measureText","fillText","actualBoundingBoxAscent","actualBoundingBoxDescent","drawNodeName","drawConnection","sourceCenter","sourceRadius","targetCenter","targetRadius","start","end","startOffset","endOffset","headLength","headWidth","arrowGap","atan2","adjLength","sqrt","drawBidirectionalArrow","drawUnidirectionalArrow","intersectsCircle","point","circleCenter","deltaX","deltaY","calculateMousePositionOnElement","element","viewportMousePos","pageX","pageY","boundingRect","getBoundingClientRect","mouseToNodeCoords","canvasState","canvasMouse","canvas","mouse","determineRadius","capacitance","allCapacitances","min","max","StyledButtons","CanvasControls","setCanvasViewState","setSavedCanvasState","StyledModalControls","StyledModalControlButton","ModalControls","StyledCanvasWrapper","StyledCanvas","cssWidth","cssHeight","Canvas","ref","onClickCanvas","canvasWidth","canvasHeight","devicePixelRatio","draw","onMouseDown","handleDoubleClick","savedCanvasViewState","setSavedCanvasViewState","setKeyboardActive","canvasRef","useRef","useEffect","handleClickOutside","keyBoardActive","current","contains","document","addEventListener","removeEventListener","setContext","mousePosRef","lastMousePosRef","lastCanvasViewState","mouseMove","newMousePos","mouseDiff","newCanvasViewState","mouseUp","startPan","useLayoutEffect","handleWheel","preventDefault","zoomDelta","zoom","newScale","mouseOffset","canvasElem","usePanZoomCanvas","renderCtx","getContext","onDoubleClick","useDraw","appNodes","appConnections","nodeRadius","nodeColor","temperature","allTemperatures","range","scaleDiverging","test","determineColor","sourceAppNode","targetAppNode","clearAndRedraw","clearRect","getNewAppNode","numNodesWithDefaultPrefix","startsWith","newNode","useAddConnection","addConnection","drawConnectionBeingMade","clickedNode","nodeCoordsOfMouse","drawArrowWithoutHead","drawConnWrapper","mouseUpOnNode","newConnection","getNewAppNodes","clickedMouseEvent","currentMouseEvent","multiSelectKeyPressed","activeNodes","offsetMouseToCenter","newClickedCenter","newClickedNode","newActiveNodes","distanceFromClickedCenter","useMultiSelect","setActiveNodes","boxStart","drawBox","globalAlpha","fillRect","rect","boxEnd","startBox","endBox","topLeft","bottomRight","bottomLeft","topRight","isInsideBox","useOnMouseDown","clearActiveNodes","makeNewConnection","moveNode","movedRef","mouseDownEvent","newNodes","mouseUpEvent","useMoveNode","multiSelect","defaultBehavior","altKey","onMouseUp","clientX","clientY","useClickAndDragElement","events","lastMousePos","onDragX","onDragY","onMouseMove","mouseMoveEvent","currentMousePos","diff","StyledApp","modalOpen","StyledDraggableBorder","StyledHorizontalBorder","StyledVerticalBorder","StyledWorkspace","StyledConfirmationModal","StyledConfirmationText","p","StyledConfirmationButtons","StyledConfirmationButton","ConfirmationModal","modalState","StyledTheoryModal","StyledTitle","h1","StyledText","StyledLink","TheoryModal","display","tex","String","raw","href","rel","StyledModal","StyledExitButton","Modal","onClickOutside","modalRef","listener","modalContent","getModalContent","prevState","App","defaultValue","React","localState","window","sessionStorage","getItem","setItem","useSessionStorageState","newConnections","newCanvasState","newSavedCanvasState","newTiming","newModelOutput","useAppStateModifiers","setAppNodes","setAppConnections","setModelOutput","addNode","nodesToUpdate","prevConn","nodeToUpdate","nodeIds","connsToUpdate","connIdsToUpdate","oldConns","connIds","useNodeConnectionUtils","keyboardActive","metaKey","keyCode","useKeyDown","doubleClickedNode","newAppNode","useDoubleClick","size","setSize","ratio","setRatio","updateSize","innerWidth","innerHeight","updateRatio","useWindowSize","windowWidth","windowHeight","deltaYPx","prevAppState","deltaXPx","useResizablePanels","canvasPlotBorderRef","onMouseDownOnCanvasPlotBorder","leftRightBorderRef","onMouseDownOnLeftRightBorder","tableControlsBorderRef","onMouseDownOnTableControlsBorder","workspaceWidth","workspaceHeight","plotHeight","plotWidth","editorWidth","plot","addNodeInCenterOfCanvas","topLeftPoint","getCanvasCenter","createNewLogicalConnection","found","firstNode","secondNode","connectionForwardsExists","connectionBackwardsExists","getNewAppConnection","conns","run","errors","error","console","message","scrollableElem","createElement","innerElem","overflow","borderWidth","appendChild","body","offsetWidth","clientWidth","removeChild","areScrollbarsVisible","classList","add","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c8893d7e.chunk.js","sourcesContent":["import { HSConnection } from \"hotstuff-network\";\n\ntype MouseEventKey = \"shiftKey\" | \"altKey\" | \"metaKey\" | \"ctrlKey\";\n\nconst config = {\n  defaultTempDegC: 23,\n  defaultCapJPerDegK: 10,\n  defaultPowerGenW: 0,\n  defaultTotalTimeSeconds: 600,\n  defaultTimeStepSeconds: 0.1,\n  defaultNodeRadius: 20,\n  defaultResistanceDegKPerW: 10,\n  defaultConnectionKind: \"bi\" as HSConnection[\"kind\"],\n  newNodeNamePrefix: \"New Node\",\n  zoomSensitivity: 1500, // bigger = less zoom per click\n  minZoom: 0.5,\n  maxZoom: 2,\n  maxZoomDelta: 2,\n  minRadiusPx: 20,\n  maxRadiusPx: 40,\n  activeNodeOutlineWidthPx: 5,\n  tabHeightPx: 25,\n  plotHeightBufferPx: 10,\n  tableDeleteCellWidthPerc: 0.1,\n  tableDeleteCellMinWidthPx: 40,\n  plotMargin: {\n    left: 10,\n    right: 20,\n    top: 20,\n    bottom: 20,\n  },\n  plotDomainMargin: 2,\n  maxPlotPoints: 400,\n  multiSelectKey: \"metaKey\" as MouseEventKey,\n};\n\nexport default config;\n","import styled from \"styled-components/macro\";\n\nexport const StyledTableWrapper = styled.div`\n  width: 100%;\n`;\n\nexport const StyledTable = styled.div`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nexport const StyledTableBody = styled.div`\n  width: 100%;\n`;\n\nexport const StyledAddButton = styled.button``;\n\nexport const StyledRow = styled.div<{\n  heightOffsetPx?: number;\n  isActive: boolean;\n}>`\n  display: inline-flex;\n  align-items: center;\n  min-width: 100%;\n  position: sticky;\n  top: ${({ heightOffsetPx }) =>\n    heightOffsetPx ? `${heightOffsetPx}px` : \"0px\"};\n  background: ${({ isActive }) =>\n    isActive ? \"rgba(112, 165, 255, 0.2)\" : \"none\"};\n`;\n\nexport const StyledCell = styled.div<{ width: number; minWidth?: number }>`\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid #ddd;\n  height: 2em;\n  width: ${({ width }) => `${width * 100}%`};\n  min-width: ${({ minWidth }) => (!!minWidth ? `${minWidth}px` : \"none\")};\n`;\n\nexport const StyledDeleteCell = styled(StyledCell)`\n  cursor: pointer;\n  user-select: none;\n  min-width: 40px;\n\n  &:hover {\n    background: black;\n  }\n`;\n\nexport const StyledHeaderWrapper = styled.div<{ heightOffsetPx?: number }>`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  position: sticky;\n  top: ${({ heightOffsetPx }) =>\n    heightOffsetPx ? `${heightOffsetPx}px` : \"0px\"};\n  z-index: 1;\n`;\n\nexport const StyledColHeader = styled.div<{ width: number; minWidth?: number }>`\n  display: inline-flex;\n  width: ${({ width }) => `${width * 100}%`};\n  min-width: ${({ minWidth }) => (!!minWidth ? `${minWidth}px` : \"none\")};\n  justify-content: center;\n  align-items: center;\n  font-weight: bold;\n  border: 1px solid lightgrey;\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n  background: white;\n  border-bottom: 1px solid black;\n`;\n\nexport const StyledColText = styled.div`\n  font-size: 0.8em;\n  padding: 1em;\n`;\n\nexport const StyledSortIcon = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 50%;\n  transform: translate(50%);\n`;\n","import config from \"../../../config\";\nimport {\n  StyledColHeader,\n  StyledColText,\n  StyledHeaderWrapper,\n  StyledSortIcon,\n} from \"./style\";\nimport * as React from \"react\";\nimport { SortDirection, TableColumn, TableSortState } from \"./types\";\n\ntype TableHeaderProps<T> = {\n  columns: TableColumn<T>[];\n  sortState: TableSortState<T>;\n  setSortState: React.Dispatch<React.SetStateAction<TableSortState<T>>>;\n};\n\nfunction oppositeSortDirection(sortDirection: SortDirection): SortDirection {\n  return sortDirection === \"ASC\" ? \"DESC\" : \"ASC\";\n}\n\nexport default function TableHeader<T>(\n  props: TableHeaderProps<T>\n): React.ReactElement {\n  const { columns, sortState, setSortState } = props;\n\n  const sortIcon = !sortState\n    ? \"\"\n    : sortState.direction === \"ASC\"\n    ? \"\\u25B2\"\n    : \"\\u25BC\";\n\n  return (\n    <StyledHeaderWrapper heightOffsetPx={config.tabHeightPx}>\n      {columns.map((col) => {\n        const isSortedCol = sortState && sortState.key === col.key;\n        const onClick = () => {\n          setSortState({\n            key: col.key,\n            direction:\n              !isSortedCol || !sortState\n                ? \"ASC\"\n                : oppositeSortDirection(sortState.direction),\n          });\n        };\n\n        return (\n          <StyledColHeader\n            key={col.key.toString()}\n            onClick={onClick}\n            width={col.width}\n            minWidth={col.minWidthPx}\n          >\n            <StyledColText>{col.text}</StyledColText>\n            <StyledSortIcon>{isSortedCol ? sortIcon : \"\"}</StyledSortIcon>\n          </StyledColHeader>\n        );\n      })}\n      <StyledColHeader\n        width={config.tableDeleteCellWidthPerc}\n        minWidth={config.tableDeleteCellMinWidthPx}\n        style={{ cursor: \"unset\" }}\n      />\n    </StyledHeaderWrapper>\n  );\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { CellOption } from \"../types\";\n\nconst StyledSelect = styled.select`\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  background: unset;\n`;\n\nexport type DropDownTableCellProps = {\n  rowId: string;\n  options: CellOption[];\n  setOption?: CellOption;\n  onSelectOption: (id: string, option: CellOption) => void;\n  optionsFilter?: (option: CellOption) => CellOption[];\n};\n\nexport default function DropDownTableCell(\n  props: DropDownTableCellProps\n): React.ReactElement {\n  function handleChange(event: React.ChangeEvent<HTMLSelectElement>) {\n    const newVal = event.target.value;\n\n    const selectedOption = props.options.find((option) => option.id === newVal);\n\n    if (selectedOption !== undefined) {\n      props.onSelectOption(props.rowId, selectedOption);\n    }\n  }\n\n  return (\n    <StyledSelect value={props.setOption?.id} onChange={handleChange}>\n      {props.options.map((option) => (\n        <option key={option.id} value={option.id}>\n          {option.text}\n        </option>\n      ))}\n    </StyledSelect>\n  );\n}\n","import styled from \"styled-components/macro\";\n\nexport const StyledInput = styled.input`\n  display: inline-block;\n  border: none;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding: 0;\n  background: unset;\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n`;\n\nexport const StyledEditor = styled.div<{ width: number; height: number }>`\n  height: ${(props) => props.height}px;\n  width: ${(props) => props.width}px;\n  border-left: 3px solid black;\n`;\n\nexport const StyledTables = styled.div<{ heightFrac: number }>`\n  display: inline-flex;\n  width: 100%;\n  height: ${(props) => props.heightFrac * 100}%;\n`;\n\nexport const StyledModelControlsWrapper = styled.div<{ heightFrac: number }>`\n  display: inline-flex;\n  width: 100%;\n  height: ${(props) => props.heightFrac * 100}%;\n`;\n","import React, { useCallback, useState } from \"react\";\nimport { StyledInput } from \"./style\";\n\ninterface CanBeMadeString {\n  toString: () => string;\n}\n\ntype EditableInputProps<T> = {\n  initialValue: T;\n  onBlur: (value: T) => void;\n  getNewValue: (event: React.ChangeEvent<HTMLInputElement>) => T | undefined;\n};\n\nexport default function EditableInput<T extends CanBeMadeString>(\n  props: EditableInputProps<T>\n): React.ReactElement {\n  const { initialValue, onBlur, getNewValue } = props;\n\n  const [value, setValue] = useState<string>(initialValue.toString());\n\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>) {\n    const newVal = event.target.value;\n    if (newVal !== undefined) {\n      setValue(newVal);\n    }\n  }\n\n  const handleOnBlur = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const newVal = getNewValue(event);\n      if (event.target.value === initialValue.toString()) {\n        return;\n      } else if (newVal !== undefined) {\n        setValue(newVal.toString());\n        onBlur(newVal);\n      } else {\n        setValue(initialValue.toString());\n        onBlur(initialValue);\n      }\n    },\n    [getNewValue, initialValue, onBlur]\n  );\n\n  return (\n    <StyledInput\n      type=\"text\"\n      value={value}\n      onChange={handleOnChange}\n      onBlur={handleOnBlur}\n      // TODO LEO\n      onKeyDown={(event: React.KeyboardEvent) => {\n        if (event.key === \"Escape\") {\n        } else if (event.key === \"Enter\") {\n        }\n      }}\n    />\n  );\n}\n","import React from \"react\";\nimport EditableInput from \"./EditableInput\";\n\ntype EditableStringInputProps = {\n  initialValue: string;\n  onBlur: (value: string) => void;\n};\n\nexport default function EditableStringInput(\n  props: EditableStringInputProps\n): React.ReactElement {\n  return (\n    <EditableInput<string>\n      key={props.initialValue}\n      initialValue={props.initialValue}\n      onBlur={props.onBlur}\n      getNewValue={(event: React.ChangeEvent<HTMLInputElement>) =>\n        event.target.value\n      }\n    />\n  );\n}\n","import React from \"react\";\nimport EditableStringInput from \"../../EditableStringInput\";\n\nexport type TextTableCellProps = {\n  initialVal: string;\n  onBlur: (newValue: string) => void;\n};\n\nexport default function TextTableCell(\n  props: TextTableCellProps\n): React.ReactElement {\n  return (\n    <EditableStringInput\n      initialValue={props.initialVal}\n      onBlur={props.onBlur}\n    />\n  );\n}\n","import React from \"react\";\nimport EditableInput from \"./EditableInput\";\n\nfunction getFloatVal(\n  event: React.ChangeEvent<HTMLInputElement>\n): number | undefined {\n  const newValueText = event.target.value;\n  // things like 123.3abc will still parse as 123.3\n  const newValueFloat = parseFloat(event.target.value);\n  if (newValueText === undefined || isNaN(newValueFloat)) {\n    return undefined;\n  }\n  return newValueFloat;\n}\n\ntype EditableNumberInputProps = {\n  initialValue: number;\n  onBlur: (value: number) => void;\n};\n\nexport default function EditableNumberInput(\n  props: EditableNumberInputProps\n): React.ReactElement {\n  return (\n    <EditableInput<number>\n      key={props.initialValue}\n      initialValue={props.initialValue}\n      onBlur={props.onBlur}\n      getNewValue={getFloatVal}\n    />\n  );\n}\n","import React from \"react\";\nimport EditableNumberInput from \"../../EditableNumberInput\";\n\nexport type NumericalTableCellProps = {\n  initialVal: number;\n  onBlur: (newValue: number) => void;\n};\n\nexport default function NumericalTableCell(\n  props: NumericalTableCellProps\n): React.ReactElement {\n  return (\n    <EditableNumberInput\n      initialValue={props.initialVal}\n      onBlur={props.onBlur}\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\n\nconst StyledCheckbox = styled.div`\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n`;\n\nexport type BooleanTableCellProps = {\n  initialIsActive?: boolean;\n  onClick: (isActive: boolean) => void;\n  showWhenActive: string;\n};\n\nexport default function BooleanTableCell(\n  props: BooleanTableCellProps\n): React.ReactElement {\n  const [isActive, setIsActive] = useState<boolean>(\n    props.initialIsActive !== undefined ? props.initialIsActive : false\n  );\n\n  return (\n    <StyledCheckbox\n      tabIndex={0}\n      onKeyUp={(event: React.KeyboardEvent) => {\n        if (event.key === \"Enter\") {\n          setIsActive(!isActive);\n          props.onClick(!isActive);\n        }\n      }}\n      onClick={() => {\n        setIsActive(!isActive);\n        props.onClick(!isActive);\n      }}\n    >\n      &nbsp;{isActive ? props.showWhenActive : \"\"}\n    </StyledCheckbox>\n  );\n}\n","import * as React from \"react\";\nimport DropDownTableCell from \"./cells/DropDownTableCell\";\nimport TextTableCell from \"./cells/TextTableCell\";\nimport NumericalTableCell from \"./cells/NumericalTableCell\";\nimport BooleanTableCell from \"./cells/BooleanTableCell\";\nimport { CellOption, TableColumn } from \"./types\";\n\ntype TableCellType = {\n  id: string;\n};\n\ntype TableCellProps<T extends TableCellType> = {\n  row: T;\n  col: TableColumn<T>;\n  options?: CellOption[];\n  initiallySetOption?: CellOption;\n  onUpdateRow: (row: T) => void;\n};\n\nexport default function TableCell<T extends TableCellType>(\n  props: TableCellProps<T>\n): React.ReactElement {\n  const { row, col, options, initiallySetOption, onUpdateRow } = props;\n  const initialVal = row[col.key];\n\n  if (!!options && options.length > 0 && col.onSelectOption) {\n    return (\n      <DropDownTableCell\n        key={row.id}\n        rowId={row.id}\n        options={options}\n        setOption={initiallySetOption}\n        onSelectOption={col.onSelectOption}\n      />\n    );\n  } else if (typeof initialVal === \"string\") {\n    return (\n      <TextTableCell\n        initialVal={initialVal}\n        onBlur={(newVal) => onUpdateRow({ ...row, [col.key]: newVal })}\n      />\n    );\n  } else if (\n    typeof initialVal === \"number\" &&\n    typeof row[col.key] === \"number\"\n  ) {\n    return (\n      <NumericalTableCell\n        initialVal={initialVal}\n        onBlur={(newVal) => onUpdateRow({ ...row, [col.key]: newVal })}\n      />\n    );\n  } else if (typeof initialVal === \"boolean\") {\n    return (\n      <BooleanTableCell\n        key={initialVal.toString()}\n        initialIsActive={initialVal}\n        onClick={(newVal) => onUpdateRow({ ...row, [col.key]: newVal })}\n        showWhenActive={\"✅\"}\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { TableSortState } from \"../types\";\n\ninterface IDHavingThing {\n  id: string;\n}\n\nexport default function useSortableTable<T extends IDHavingThing>(props: {\n  default: TableSortState<T>;\n}): [\n  TableSortState<T>,\n  React.Dispatch<React.SetStateAction<TableSortState<T>>>,\n  (first: T, second: T) => number\n] {\n  const [sortState, setSortState] = useState<TableSortState<T>>(props.default);\n\n  function sortByState(first: T, second: T): number {\n    if (sortState.direction === \"ASC\") {\n      if (first[sortState.key] > second[sortState.key]) {\n        return 1;\n      } else if (first[sortState.key] === second[sortState.key]) {\n        return first.id > second.id ? 1 : -1;\n      } else {\n        return -1;\n      }\n    } else {\n      if (first[sortState.key] > second[sortState.key]) {\n        return -1;\n      } else if (first[sortState.key] === second[sortState.key]) {\n        return first.id > second.id ? 1 : -1;\n      } else {\n        return 1;\n      }\n    }\n  }\n\n  return [sortState, setSortState, sortByState];\n}\n","import React from \"react\";\nimport config from \"../../../config\";\nimport { StyledDeleteCell } from \"./style\";\n\ntype DeleteCellProps<T> = {\n  row: T;\n  onDeleteRow: (row: T) => void;\n};\n\nexport default function DeleteCell<T>(\n  props: DeleteCellProps<T>\n): React.ReactElement {\n  return (\n    <StyledDeleteCell\n      tabIndex={0}\n      onKeyUp={(event: React.KeyboardEvent) => {\n        if (event.key === \"Enter\") {\n          props.onDeleteRow(props.row);\n        }\n      }}\n      width={config.tableDeleteCellWidthPerc}\n      minWidth={config.tableDeleteCellMinWidthPx}\n      onClick={() => props.onDeleteRow(props.row)}\n    >\n      ❌\n    </StyledDeleteCell>\n  );\n}\n","import React from \"react\";\nimport config from \"../../../../config\";\nimport { AppNode } from \"../../../../App\";\nimport {\n  StyledCell,\n  StyledRow,\n  StyledTable,\n  StyledTableBody,\n  StyledTableWrapper,\n  StyledAddButton,\n} from \"../style\";\nimport { TableColumn, TableSortState } from \"../types\";\nimport TableHeader from \"../TableHeader\";\nimport TableCell from \"../TableCell\";\nimport useSortableTable from \"../hooks/useSortableTable\";\nimport DeleteCell from \"../DeleteCell\";\n\ntype NodeTableColumn = TableColumn<AppNode>;\n\nconst defaultNodeSortState: TableSortState<AppNode> = {\n  key: \"name\",\n  direction: \"ASC\",\n};\n\nconst nodeColumns: NodeTableColumn[] = [\n  {\n    key: \"name\",\n    text: \"Name\",\n    width: 0.3,\n    minWidthPx: 100,\n  },\n  {\n    key: \"temperatureDegC\",\n    text: \"Temp [degC]\",\n    width: 0.15,\n    minWidthPx: 100,\n  },\n  {\n    key: \"capacitanceJPerDegK\",\n    text: \"Capacitance [J/degK]\",\n    width: 0.15,\n    minWidthPx: 100,\n  },\n  {\n    key: \"powerGenW\",\n    text: \"Power Gen [W]\",\n    width: 0.15,\n    minWidthPx: 80,\n  },\n  {\n    key: \"isBoundary\",\n    text: \"Boundary?\",\n    width: 0.15,\n    minWidthPx: 80,\n  },\n];\n\ntype NodeTableProps = {\n  rows: AppNode[];\n  onUpdateRow: (row: AppNode) => void;\n  onDeleteRow: (row: AppNode) => void;\n  onAddButton: () => void;\n};\n\nexport default function NodeTable(props: NodeTableProps): React.ReactElement {\n  const { rows, onUpdateRow, onDeleteRow, onAddButton } = props;\n\n  const [sortState, setSortState, sortByState] = useSortableTable<AppNode>({\n    default: defaultNodeSortState,\n  });\n\n  const sortedRows = rows.sort(sortByState);\n\n  const tableRows = sortedRows.map((row) => {\n    return (\n      <StyledRow\n        key={row.id}\n        heightOffsetPx={config.tabHeightPx}\n        isActive={row.isActive}\n      >\n        {nodeColumns.map((col) => {\n          const tableCell = (\n            <TableCell<AppNode> row={row} col={col} onUpdateRow={onUpdateRow} />\n          );\n          return (\n            <StyledCell\n              key={col.key}\n              width={col.width}\n              minWidth={col.minWidthPx}\n            >\n              {tableCell}\n            </StyledCell>\n          );\n        })}\n        <DeleteCell row={row} onDeleteRow={() => onDeleteRow(row)} />\n      </StyledRow>\n    );\n  });\n\n  return (\n    <StyledTableWrapper>\n      <StyledTable>\n        <TableHeader<AppNode>\n          columns={nodeColumns}\n          sortState={sortState}\n          setSortState={setSortState}\n        />\n        <StyledTableBody>{tableRows}</StyledTableBody>\n        <StyledAddButton onClick={onAddButton}>+</StyledAddButton>\n      </StyledTable>\n    </StyledTableWrapper>\n  );\n}\n","import React, { useCallback, useMemo } from \"react\";\nimport config from \"../../../../config\";\nimport { AppConnection, AppNode } from \"../../../../App\";\nimport {\n  StyledAddButton,\n  StyledCell,\n  StyledRow,\n  StyledTable,\n  StyledTableBody,\n  StyledTableWrapper,\n} from \"../style\";\nimport { CellOption, TableColumn, TableSortState } from \"../types\";\nimport TableHeader from \"../TableHeader\";\nimport TableCell from \"../TableCell\";\nimport useSortableTable from \"../hooks/useSortableTable\";\nimport { ConnectionKind } from \"../../../types\";\nimport DeleteCell from \"../DeleteCell\";\n\nexport type AppConnectionTable = AppConnection & { isActive: boolean };\ntype ConnectionTableColumn = TableColumn<AppConnection>;\n\nconst defaultConnectionSortState: TableSortState<AppConnectionTable> = {\n  key: \"sourceName\",\n  direction: \"ASC\",\n};\n\nconst connectionTypes: CellOption[] = [\n  {\n    id: \"bi\",\n    text: \"Bidirectional\",\n  },\n  {\n    id: \"uni\",\n    text: \"Unidirectional\",\n  },\n  {\n    id: \"rad\",\n    text: \"Radiative\",\n  },\n];\n\nfunction filterConnectionOptions(\n  colKey: string,\n  options: CellOption[],\n  selectedSourceId: string,\n  selectedTargetId: string,\n  connections: AppConnection[]\n): CellOption[] {\n  const otherConnections = connections.filter(\n    (conn) =>\n      !(\n        conn.source.id === selectedSourceId &&\n        conn.target.id === selectedTargetId\n      )\n  );\n\n  if (colKey === \"sourceName\") {\n    // options for source node\n    const noSelfConnectionOptions = options.filter(\n      (option) => option.id !== selectedTargetId\n    );\n    // for each source option, there is no other connection that already matches the source -> target or target -> source\n    return noSelfConnectionOptions.filter((option) => {\n      return !otherConnections.some(\n        (c) =>\n          (c.source.id === option.id && c.target.id === selectedTargetId) ||\n          (c.source.id === selectedTargetId && c.target.id === option.id)\n      );\n    });\n  } else if (colKey === \"targetName\") {\n    // options for target node\n    const noSelfConnectionOptions = options.filter(\n      (option) => option.id !== selectedSourceId\n    );\n    // for each target option, there is no other connection that already matches the source -> target or target -> source\n    return noSelfConnectionOptions.filter((option) => {\n      return !otherConnections.some(\n        (c) =>\n          (c.source.id === selectedSourceId && c.target.id === option.id) ||\n          (c.source.id === option.id && c.target.id === selectedSourceId)\n      );\n    });\n  } else {\n    return options;\n  }\n}\n\ntype ConnectionTableProps = {\n  rows: AppConnection[];\n  nodes: AppNode[];\n  onUpdateRow: (row: AppConnection) => void;\n  onDeleteRow: (row: AppConnection) => void;\n  onAddButton: () => void;\n};\n\nexport default function ConnectionTable(\n  props: ConnectionTableProps\n): React.ReactElement {\n  const [sortState, setSortState, sortByState] =\n    useSortableTable<AppConnectionTable>({\n      default: defaultConnectionSortState,\n    });\n\n  const onSelectNewSource = useCallback(\n    (id: string, option: CellOption) => {\n      const connection = props.rows.find((conn) => conn.id === id);\n      const newSourceNode = props.nodes.find((node) => node.id === option.id);\n      if (\n        !connection ||\n        !newSourceNode ||\n        newSourceNode.id === connection.target.id\n      ) {\n        return;\n      }\n      props.onUpdateRow({\n        ...connection,\n        source: newSourceNode,\n        sourceName: newSourceNode.name,\n      });\n    },\n    [props]\n  );\n\n  const onSelectNewTarget = useCallback(\n    (id: string, option: CellOption) => {\n      const connection = props.rows.find((conn) => conn.id === id);\n      const newTargetNode = props.nodes.find((node) => node.id === option.id);\n      if (\n        !connection ||\n        !newTargetNode ||\n        newTargetNode.id === connection.source.id\n      ) {\n        return;\n      }\n      props.onUpdateRow({\n        ...connection,\n        target: newTargetNode,\n        targetName: newTargetNode.name,\n      });\n    },\n    [props]\n  );\n\n  const onSelectNewConnectionType = useCallback(\n    (id: string, option: CellOption) => {\n      const rowToUpdate = props.rows.find((conn) => conn.id === id);\n      if (rowToUpdate) {\n        props.onUpdateRow({\n          ...rowToUpdate,\n          kind: option.id as ConnectionKind,\n        });\n      }\n    },\n    [props]\n  );\n\n  const nodeOptions: CellOption[] = props.nodes.map((node) => ({\n    id: node.id,\n    text: node.name,\n  }));\n\n  const connectionColumns: ConnectionTableColumn[] = useMemo(\n    () => [\n      {\n        text: \"Source\",\n        key: \"sourceName\",\n        width: 0.3,\n        minWidthPx: 100,\n        options: nodeOptions,\n        onSelectOption: onSelectNewSource,\n      },\n      {\n        text: \"Target\",\n        key: \"targetName\",\n        width: 0.3,\n        minWidthPx: 100,\n        options: nodeOptions,\n        onSelectOption: onSelectNewTarget,\n      },\n      {\n        text: \"Resistance [degK/W]\",\n        key: \"resistanceDegKPerW\",\n        width: 0.2,\n        minWidthPx: 100,\n      },\n      {\n        text: \"Kind\",\n        key: \"kind\",\n        width: 0.2,\n        minWidthPx: 100,\n        options: connectionTypes,\n        onSelectOption: onSelectNewConnectionType,\n      },\n    ],\n    [\n      nodeOptions,\n      onSelectNewConnectionType,\n      onSelectNewSource,\n      onSelectNewTarget,\n    ]\n  );\n\n  const activeNodeIds = props.nodes\n    .filter((node) => node.isActive)\n    .map((node) => node.id);\n\n  const sortedRowsWithActiveInfo: AppConnectionTable[] = props.rows\n    .map((row) => {\n      return {\n        ...row,\n        isActive:\n          activeNodeIds.includes(row.source.id) ||\n          activeNodeIds.includes(row.target.id),\n      };\n    })\n    .sort(sortByState);\n\n  const tableRows = sortedRowsWithActiveInfo.map((row) => {\n    const cols = connectionColumns.map((col) => {\n      function makeStyledCell(tableCell: React.ReactElement) {\n        return (\n          <StyledCell key={col.key} width={col.width} minWidth={col.minWidthPx}>\n            {tableCell}\n          </StyledCell>\n        );\n      }\n\n      if (!!col.options) {\n        const setOption = col.options?.find(\n          (option) => option.id === row[col.key] || option.text === row[col.key]\n        );\n        const options = !!setOption\n          ? [\n              setOption,\n              ...filterConnectionOptions(\n                col.key,\n                col.options || [],\n                row.source.id,\n                row.target.id,\n                props.rows\n              ).filter((opt) => opt.id !== setOption.id),\n            ]\n          : [];\n\n        const tableCell = (\n          <TableCell<AppConnectionTable>\n            row={row}\n            col={col}\n            options={options}\n            initiallySetOption={setOption}\n            onUpdateRow={props.onUpdateRow}\n          />\n        );\n        return makeStyledCell(tableCell);\n      } else {\n        return makeStyledCell(\n          <TableCell<AppConnectionTable>\n            row={row}\n            col={col}\n            onUpdateRow={props.onUpdateRow}\n          />\n        );\n      }\n    });\n\n    return (\n      <StyledRow\n        key={row.id}\n        heightOffsetPx={config.tabHeightPx}\n        isActive={row.isActive}\n      >\n        {cols}\n        <DeleteCell row={row} onDeleteRow={() => props.onDeleteRow(row)} />\n      </StyledRow>\n    );\n  });\n\n  return (\n    <StyledTableWrapper>\n      <StyledTable>\n        <TableHeader<AppConnectionTable>\n          columns={connectionColumns}\n          sortState={sortState}\n          setSortState={setSortState}\n        />\n        <StyledTableBody>{tableRows}</StyledTableBody>\n        <StyledAddButton onClick={props.onAddButton}>+</StyledAddButton>\n      </StyledTable>\n    </StyledTableWrapper>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport config from \"../../config\";\n\nconst StyledTabsWrapper = styled.div`\n  display: inline-flex;\n  width: 100%;\n  flex-direction: column;\n  overflow: auto;\n  position: relative;\n`;\n\nconst StyledTabs = styled.div`\n  display: inline-flex;\n  width: 100%;\n  height: ${config.tabHeightPx}px;\n  justify-content: space-evenly;\n  position: sticky;\n  top: 0;\n  background: white;\n  box-sizing: border-box;\n  z-index: 1;\n`;\n\nconst StyledTab = styled.div<{ width: number }>`\n  display: inline-flex;\n  width: ${({ width }) => `${width * 100}%`};\n  cursor: pointer;\n  text-decoration: none;\n  align-items: center;\n  //background: lightgray;\n  //background: rgb(85, 9, 121);\n  background: linear-gradient(\n    90deg,\n    rgba(46, 228, 233, 1) 0%,\n    rgba(46, 228, 233, 1) 40%,\n    rgba(255, 0, 230, 1) 80%,\n    rgba(85, 9, 121, 1) 100%\n  );\n  border-radius: 5px 5px 0 0;\n  border: 1px solid black;\n  border-bottom: 2px solid black;\n\n  &:hover,\n  &:focus {\n    opacity: 0.7;\n  }\n`;\n\nconst StyledTabText = styled.div`\n  font-size: 1.1em;\n  padding: 0.2em 0.5em;\n\n  &.active {\n    font-weight: bold;\n  }\n`;\n\nconst StyledInnerContent = styled.div<{ topLeftRounded: boolean }>`\n  background: white;\n  position: relative;\n`;\n\ntype Tab = {\n  text: string;\n  component: React.ReactElement;\n  width: number; // between 0 and 1\n};\n\nexport type TabsProps = {\n  tabs: Tab[];\n};\n\nexport default function Tabs(props: TabsProps): React.ReactElement {\n  const [activeIdx, setActiveIdx] = useState(0);\n\n  return (\n    <StyledTabsWrapper>\n      {props.tabs.length > 1 && (\n        <StyledTabs>\n          {props.tabs.map((tab, idx) => {\n            return (\n              <StyledTab\n                key={tab.text}\n                tabIndex={0}\n                onClick={() => setActiveIdx(idx)}\n                onKeyUp={(event: React.KeyboardEvent) => {\n                  if (event.key === \"Enter\") {\n                    setActiveIdx(idx);\n                  }\n                }}\n                width={tab.width}\n              >\n                <StyledTabText className={idx === activeIdx ? \"active\" : \"\"}>\n                  {tab.text}\n                </StyledTabText>\n              </StyledTab>\n            );\n          })}\n        </StyledTabs>\n      )}\n\n      <StyledInnerContent topLeftRounded={props.tabs.length <= 1}>\n        {props.tabs.filter((_, idx) => idx === activeIdx)[0].component}\n      </StyledInnerContent>\n    </StyledTabsWrapper>\n  );\n}\n","export type Point = {\n  x: number;\n  y: number;\n};\n\nexport const ORIGIN = Object.freeze({ x: 0, y: 0 });\n\nexport function makePoint(x: number, y: number): Point {\n  return { x, y };\n}\n\nexport function addPoints(p1: Point, p2: Point): Point {\n  return { x: p1.x + p2.x, y: p1.y + p2.y };\n}\n\nexport function diffPoints(p1: Point, p2: Point): Point {\n  return { x: p1.x - p2.x, y: p1.y - p2.y };\n}\n\nexport function scalePoint(p1: Point, scale: number): Point {\n  return { x: p1.x / scale, y: p1.y / scale };\n}\n\n// export function distanceBetweenPoints(p1: Point, p2: Point): number {\n//   return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n// }\n","import { makeConnection, makeNode } from \"hotstuff-network\";\nimport { AppConnection, AppNode, ModalState, PanelSizes, Timing } from \"./App\";\nimport config from \"./config\";\nimport { ORIGIN } from \"./utils/pointUtils\";\nimport { CanvasViewState } from \"./components/Canvas/Canvas\";\n\nconst jerryNode = makeNode({\n  name: \"Jerry the Cat\",\n  temperatureDegC: 38.3,\n  capacitanceJPerDegK: 16.2e3, // 3.6kJ/kg/degK * 4.5kg\n  powerGenW: 100, // ??\n  isBoundary: false,\n});\nconst jerryAppNode: AppNode = {\n  ...jerryNode,\n  center: { x: 200, y: 150 },\n  isActive: false,\n  textDirection: \"L\",\n};\n\nconst bedNode = makeNode({\n  name: \"Heated Cat Bed\",\n  temperatureDegC: 40, // ??\n  capacitanceJPerDegK: 10e3,\n  powerGenW: 4,\n  isBoundary: false,\n});\nconst bedAppNode: AppNode = {\n  ...bedNode,\n  center: { x: 500, y: 150 },\n  isActive: false,\n  textDirection: \"R\",\n};\n\nconst airNode = makeNode({\n  name: \"Apartment Air\",\n  temperatureDegC: 22.5,\n  capacitanceJPerDegK: 6e5, // 1.0035J/g/degK * 600,000g\n  powerGenW: 0,\n  isBoundary: false,\n});\nconst airAppNode: AppNode = {\n  ...airNode,\n  center: { x: 350, y: 300 },\n  isActive: false,\n  textDirection: \"D\",\n};\n\nexport const defaultNodes: AppNode[] = [jerryAppNode, bedAppNode, airAppNode];\n\nexport const defaultConnections: AppConnection[] = [\n  {\n    ...makeConnection({\n      source: jerryNode,\n      target: bedNode,\n      resistanceDegKPerW: 2.5, // 0.01m / 0.1m^2 / 0.04W/m/degK\n      kind: \"bi\",\n    }),\n    sourceName: jerryNode.name,\n    targetName: bedNode.name,\n  },\n  {\n    ...makeConnection({\n      source: jerryNode,\n      target: airNode,\n      resistanceDegKPerW: 0.33, // 1 / 0.3m^2 / 10W/m^2/degK\n      kind: \"bi\",\n    }),\n    sourceName: jerryNode.name,\n    targetName: airNode.name,\n  },\n  {\n    ...makeConnection({\n      source: bedNode,\n      target: airNode,\n      resistanceDegKPerW: 0.33, // 1 / 0.3m^2 / 5W/m^2/degK\n      kind: \"bi\",\n    }),\n    sourceName: bedNode.name,\n    targetName: airNode.name,\n  },\n];\n\nexport const defaultTiming: Timing = {\n  timeStepS: config.defaultTimeStepSeconds,\n  totalTimeS: config.defaultTotalTimeSeconds,\n};\n\nexport const defaultCanvasViewState: CanvasViewState = {\n  offset: ORIGIN,\n  scale: 1,\n};\n\nexport const defaultPanelSizes: PanelSizes = {\n  editorWidthFraction: 1 - 1 / 1.61803398875,\n  canvasHeightFraction: 1 / 1.61803398875,\n  tableHeightFraction: 0.5,\n};\n\nexport const defaultModalState: ModalState = {\n  visible: true,\n  type: \"theory\",\n};\n\nexport const defaultAppState = {\n  output: undefined,\n  timing: defaultTiming,\n  nodes: defaultNodes,\n  connections: defaultConnections,\n  canvasViewState: defaultCanvasViewState,\n  savedCanvasState: defaultCanvasViewState,\n  panelSizes: defaultPanelSizes,\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport EditableNumberInput from \"./EditableNumberInput\";\nimport { AppState, ModalState, Timing } from \"../../App\";\nimport { defaultAppState } from \"../../default\";\n\nconst StyledModelControlsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  border-top: 3px solid black;\n  padding-top: 1em;\n`;\n\nconst StyledButton = styled.button`\n  margin-top: 5px;\n  margin-bottom: 5px;\n`;\n\nconst StyledImport = styled.div``;\n\nconst StyledTimeControls = styled.div``;\n\nconst StyledTimeControl = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0.5em;\n`;\n\nconst StyledInputWrapper = styled.div`\n  max-width: 3em;\n  height: 1.5em;\n`;\n\nconst StyledLabel = styled.label`\n  margin-right: 0.2em;\n`;\n\nexport type ModelControlsProps = {\n  appState: AppState;\n  setAppState: React.Dispatch<React.SetStateAction<AppState>>;\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n  onRunModel: () => void;\n  setTiming: (newTiming: Timing) => void;\n};\n\nexport default function ModelControls(\n  props: ModelControlsProps\n): React.ReactElement {\n  const { appState, setAppState, setModalState, onRunModel, setTiming } = props;\n\n  const [stagedAppState, setStagedAppState] = useState<string>(\"\");\n\n  return (\n    <StyledModelControlsWrapper>\n      <StyledTimeControls>\n        <StyledTimeControl>\n          <StyledLabel>Run Time [s]:</StyledLabel>\n          <StyledInputWrapper>\n            <EditableNumberInput\n              initialValue={appState.timing.totalTimeS}\n              onBlur={(newTotalTimeS: number) =>\n                setTiming({ ...appState.timing, totalTimeS: newTotalTimeS })\n              }\n            />\n          </StyledInputWrapper>\n        </StyledTimeControl>\n        <StyledTimeControl>\n          <StyledLabel>Time Step [s]:</StyledLabel>\n          <StyledInputWrapper>\n            <EditableNumberInput\n              initialValue={appState.timing.timeStepS}\n              onBlur={(newTimeStepS: number) =>\n                setTiming({\n                  ...appState.timing,\n                  timeStepS: newTimeStepS,\n                })\n              }\n            />\n          </StyledInputWrapper>\n        </StyledTimeControl>\n      </StyledTimeControls>\n      <StyledButton onClick={onRunModel}>Run Model</StyledButton>\n\n      <StyledButton\n        onClick={() => navigator.clipboard.writeText(JSON.stringify(appState))}\n      >\n        Copy Model to ClipBoard\n      </StyledButton>\n      <StyledImport>\n        <input\n          value={stagedAppState}\n          onChange={(event) => setStagedAppState(event.target.value)}\n        />\n        <StyledButton\n          onClick={() => {\n            setAppState(JSON.parse(stagedAppState));\n            setStagedAppState(\"\");\n          }}\n        >\n          Import Model\n        </StyledButton>\n      </StyledImport>\n\n      <StyledButton\n        onClick={() =>\n          setModalState((prev) => ({\n            ...prev,\n            visible: true,\n            type: \"confirm\",\n            onConfirm: () => setAppState(defaultAppState),\n            confirmText: [\n              \"This will permanently reset the entire model, losing all your current nodes, connections, parameters and output data.\",\n              \"Do you want to proceed?\",\n            ],\n          }))\n        }\n      >\n        Reset\n      </StyledButton>\n    </StyledModelControlsWrapper>\n  );\n}\n","import * as React from \"react\";\nimport {\n  AppConnection,\n  AppNode,\n  AppState,\n  ModalState,\n  Timing,\n} from \"../../App\";\nimport NodeTable from \"./EditableTable/NodeTable/NodeTable\";\nimport ConnectionTable from \"./EditableTable/ConnectionTable/ConnectionTable\";\nimport Tabs from \"../Tabs/Tabs\";\nimport ModelControls from \"./ModelControls\";\nimport {\n  StyledEditor,\n  StyledModelControlsWrapper,\n  StyledTables,\n} from \"./style\";\n\ntype SidebarProps = {\n  appState: AppState;\n  setAppState: React.Dispatch<React.SetStateAction<AppState>>;\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n  width: number;\n  height: number;\n  setTiming: (newTiming: Timing) => void;\n  onAddNode: () => void;\n  onAddConnection: () => void;\n  updateNodes: (nodes: AppNode[], clearActiveNodes: boolean) => void;\n  deleteNodes: (nodeIds: string[]) => void;\n  updateConnections: (connections: AppConnection[]) => void;\n  deleteConnections: (connectionIds: string[]) => void;\n  onRunModel: () => void;\n};\n\nexport default function Sidebar(props: SidebarProps): React.ReactElement {\n  const {\n    appState,\n    setAppState,\n    setModalState,\n    width,\n    height,\n    setTiming,\n    onAddNode,\n    onAddConnection,\n    updateNodes,\n    deleteNodes,\n    updateConnections,\n    deleteConnections,\n    onRunModel,\n  } = props;\n\n  const nodeTable = (\n    <NodeTable\n      rows={appState.nodes}\n      onUpdateRow={(node: AppNode) => updateNodes([node], false)}\n      onDeleteRow={(node: AppNode) => deleteNodes([node.id])}\n      onAddButton={onAddNode}\n    />\n  );\n\n  const connectionTable = (\n    <ConnectionTable\n      rows={appState.connections}\n      nodes={appState.nodes}\n      onUpdateRow={(connection: AppConnection) =>\n        updateConnections([connection])\n      }\n      onDeleteRow={(connection: AppConnection) =>\n        deleteConnections([connection.id])\n      }\n      onAddButton={onAddConnection}\n    />\n  );\n\n  return (\n    <StyledEditor width={width} height={height}>\n      <StyledTables heightFrac={appState.panelSizes.tableHeightFraction}>\n        <Tabs\n          tabs={[\n            { text: \"Nodes\", component: nodeTable, width: 0.5 },\n            { text: \"Connections\", component: connectionTable, width: 0.5 },\n          ]}\n        />\n      </StyledTables>\n      <StyledModelControlsWrapper\n        heightFrac={1 - appState.panelSizes.tableHeightFraction}\n      >\n        <ModelControls\n          appState={appState}\n          setAppState={setAppState}\n          setModalState={setModalState}\n          onRunModel={onRunModel}\n          setTiming={setTiming}\n        />\n      </StyledModelControlsWrapper>\n    </StyledEditor>\n  );\n}\n","import {\n  CartesianGrid,\n  Legend,\n  LineChart,\n  Tooltip,\n  TooltipPayload,\n  TooltipProps,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport * as React from \"react\";\nimport { PlotDimensions } from \"./Plot\";\nimport styled from \"styled-components/macro\";\n\nconst StyledToolTip = styled.div`\n  background: rgba(255, 255, 255, 0.7);\n  padding: 0.2em;\n  //border-radius: 10px;\n  border: 1px solid black;\n`;\n\nconst StyledToolTipTitle = styled.div`\n  font-size: 1em;\n  font-weight: bold;\n`;\n\nconst StyledToolTipItem = styled.div<{ color: string }>`\n  color: ${(props) => props.color};\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst StyledToolTipValue = styled.div<{ after: string }>`\n  margin-left: 1em;\n\n  &::after {\n    content: \"${(props) => props.after}\";\n  }\n`;\n\nfunction CustomTooltip(props: TooltipProps & { after: string }) {\n  const { active, payload, label, after } = props;\n\n  if (active && payload && payload.length) {\n    const sortedPayload = [...payload].sort(\n      (a: TooltipPayload, b: TooltipPayload) => {\n        if (a.value > b.value) {\n          return -1;\n        } else if (a.value === b.value) {\n          if (a.name > b.name) {\n            return 1;\n          } else {\n            return -1;\n          }\n        } else {\n          return 1;\n        }\n      }\n    );\n\n    return (\n      <StyledToolTip>\n        <StyledToolTipTitle>{`Time: ${label}s`}</StyledToolTipTitle>\n        {sortedPayload.map((item) => {\n          return (\n            <StyledToolTipItem key={item.name} color={item.color || \"black\"}>\n              <div>{item.name}</div>\n              <StyledToolTipValue after={after}>\n                {item.value}\n              </StyledToolTipValue>\n            </StyledToolTipItem>\n          );\n        })}\n      </StyledToolTip>\n    );\n  }\n\n  return null;\n}\n\ntype LinePlotProps = {\n  plotDimensions: PlotDimensions;\n  plotData?: ReadonlyArray<Record<string, unknown>>;\n  lines: React.ReactElement[];\n  xAxisKey: string;\n  xLabel: string;\n  yLabel: string;\n  yDomain?: [number, number];\n  unit: string;\n};\n\nexport default function LinePlot(props: LinePlotProps): React.ReactElement {\n  const {\n    plotDimensions,\n    plotData,\n    lines,\n    xAxisKey,\n    xLabel,\n    yLabel,\n    yDomain,\n    unit,\n  } = props;\n\n  return (\n    <LineChart\n      height={plotDimensions.height}\n      width={plotDimensions.width}\n      margin={plotDimensions.margin}\n      data={plotData}\n    >\n      <CartesianGrid strokeDasharray=\"3 3\" />\n      <XAxis\n        dataKey={xAxisKey}\n        label={{\n          value: xLabel,\n          position: \"center\",\n          dy: 20,\n        }}\n      />\n      <YAxis\n        domain={yDomain}\n        label={{\n          value: yLabel,\n          position: \"center\",\n          angle: -90,\n          dx: -20,\n        }}\n      />\n      <Tooltip content={<CustomTooltip after={unit} />} />\n      <Legend\n        layout=\"horizontal\"\n        verticalAlign=\"top\"\n        align=\"center\"\n        wrapperStyle={{\n          paddingLeft: \"10px\",\n          paddingBottom: \"10px\",\n        }}\n      />\n      {lines}\n    </LineChart>\n  );\n}\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { Line } from \"recharts\";\nimport styled from \"styled-components\";\nimport { emptyOutput, ModelOutput } from \"hotstuff-network\";\nimport LinePlot from \"./LinePlot\";\nimport Tabs from \"../Tabs/Tabs\";\nimport config from \"../../config\";\n\nconst { maxPlotPoints, plotDomainMargin } = config;\n\nconst colors = [\n  \"#2ecc71\",\n  \"#3498db\",\n  \"#9b59b6\",\n  \"#e74c3c\",\n  \"#e67e22\",\n  \"#34495e\",\n  \"#16a085\",\n];\n\nconst StyledCharts = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n\n  .chart {\n    width: 60% !important;\n    max-width: 900px;\n\n    @media only screen and (max-width: 600px) {\n      width: 90% !important;\n      touch-action: pan-y;\n    }\n  }\n`;\n\nconst StyledPlot = styled.div<{ height: number; width: number }>`\n  width: 100%;\n  height: ${(props) => props.height}px;\n  border-top: 3px solid black;\n  margin: 0;\n  padding: 0;\n`;\n\ntype Margin = {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n};\n\nexport type PlotDimensions = {\n  height: number;\n  width: number;\n  margin: Margin;\n};\n\ntype TimeSeriesPlotData = {\n  time: number;\n  [key: string]: number;\n};\n\ntype PlotDomain = [number, number];\n\nfunction roundToNearestTenth(input: number): number {\n  return Math.round(input * 10) / 10;\n}\n\nfunction plotShape(\n  data: ModelOutput\n): [TimeSeriesPlotData[], PlotDomain, TimeSeriesPlotData[], PlotDomain] {\n  // the number of points depends on the order of magnitude\n  const lowerMag = Math.floor(Math.log10(data.totalTimeS));\n  const divisibleBy = Math.pow(10, lowerMag - 1);\n  function include(val: number) {\n    return Math.abs(val % divisibleBy) === 0;\n  }\n\n  const includeAll = data.timeSeriesS.length < maxPlotPoints;\n\n  const tempsAtAllTimes: TimeSeriesPlotData[] = [];\n  let minTemp = 1e9;\n  let maxTemp = -1e9;\n  const heatTransfersAtAllTimes: TimeSeriesPlotData[] = [];\n  let minHeatTransfer = 1e9;\n  let maxHeatTransfer = -1e9;\n\n  data.timeSeriesS.forEach((t, idx) => {\n    if (includeAll || include(t)) {\n      const temp: TimeSeriesPlotData = { time: t };\n      const ht: TimeSeriesPlotData = { time: t };\n\n      data.nodeResults.forEach((nodeResult) => {\n        const tempVal = nodeResult.tempDegC[idx];\n        if (tempVal < minTemp) {\n          minTemp = tempVal;\n        } else if (tempVal > maxTemp) {\n          maxTemp = tempVal;\n        }\n        temp[nodeResult.node.name] = roundToNearestTenth(tempVal);\n      });\n\n      data.connectionResults.forEach((connectionResult) => {\n        const heatTransferVal = connectionResult.heatTransferW[idx];\n        if (heatTransferVal < minHeatTransfer) {\n          minHeatTransfer = heatTransferVal;\n        } else if (heatTransferVal > maxHeatTransfer) {\n          maxHeatTransfer = heatTransferVal;\n        }\n        ht[\n          `${connectionResult.connection.source.name} to ${connectionResult.connection.target.name}`\n        ] = roundToNearestTenth(heatTransferVal);\n      });\n\n      tempsAtAllTimes.push(temp);\n      heatTransfersAtAllTimes.push(ht);\n    }\n  });\n  return [\n    tempsAtAllTimes,\n    [minTemp, maxTemp],\n    heatTransfersAtAllTimes,\n    [minHeatTransfer, maxHeatTransfer],\n  ];\n}\n\ntype PlotProps = {\n  plotDimensions: PlotDimensions;\n  modelOutput?: ModelOutput;\n};\n\nexport default function Plot(props: PlotProps): React.ReactElement {\n  const modelHasOutput = !!(\n    props.modelOutput && props.modelOutput.nodeResults.length > 0\n  );\n  const res =\n    modelHasOutput && props.modelOutput ? props.modelOutput : emptyOutput;\n\n  const [tempPlotData, tempDomain, heatTransferPlotData, heatTransferDomain] =\n    plotShape(res);\n\n  const yTempDomain: [number, number] | undefined = modelHasOutput\n    ? [\n        Math.floor(tempDomain[0]) - plotDomainMargin,\n        Math.ceil(tempDomain[1] + plotDomainMargin),\n      ]\n    : undefined;\n  const yHeatTransferDomain: [number, number] | undefined = modelHasOutput\n    ? [\n        Math.floor(heatTransferDomain[0]) - plotDomainMargin,\n        Math.ceil(heatTransferDomain[1] + plotDomainMargin),\n      ]\n    : undefined;\n\n  const heatTransferLines = useMemo(\n    () =>\n      res.connectionResults.map((connectionResult, idx) => {\n        return (\n          <Line\n            key={connectionResult.connection.id}\n            type={\"monotone\"}\n            dataKey={`${connectionResult.connection.source.name} to ${connectionResult.connection.target.name}`}\n            stroke={colors[idx]}\n            activeDot={{ r: 8 }}\n            isAnimationActive={false}\n          />\n        );\n      }),\n    [res.connectionResults]\n  );\n\n  const tempLines = useMemo(\n    () =>\n      res.nodeResults.map((nodeResult, idx) => {\n        return (\n          <Line\n            key={nodeResult.node.id}\n            type={\"monotone\"}\n            dataKey={nodeResult.node.name}\n            stroke={colors[idx]}\n            activeDot={{ r: 8 }}\n            isAnimationActive={false}\n          />\n        );\n      }),\n    [res.nodeResults]\n  );\n\n  const tempPlot = (\n    <LinePlot\n      plotDimensions={props.plotDimensions}\n      plotData={tempPlotData}\n      lines={tempLines}\n      xAxisKey={\"time\"}\n      xLabel={\"Time [s]\"}\n      yLabel={\"Temperature [degC]\"}\n      yDomain={yTempDomain}\n      unit={\"degC\"}\n    />\n  );\n\n  const heatTransferPlot = (\n    <LinePlot\n      plotDimensions={props.plotDimensions}\n      plotData={heatTransferPlotData}\n      lines={heatTransferLines}\n      xAxisKey={\"time\"}\n      xLabel={\"Time [s]\"}\n      yLabel={\"Heat Transfer [Watts]\"}\n      yDomain={yHeatTransferDomain}\n      unit={\"W\"}\n    />\n  );\n\n  return (\n    <StyledPlot\n      height={props.plotDimensions.height}\n      width={props.plotDimensions.width}\n    >\n      <StyledCharts>\n        <Tabs\n          tabs={[\n            {\n              text: \"Temperature\",\n              component: tempPlot,\n              width: 0.5,\n            },\n            {\n              text: \"Heat Transfer\",\n              component: heatTransferPlot,\n              width: 0.5,\n            },\n          ]}\n        />\n      </StyledCharts>\n    </StyledPlot>\n  );\n}\n","import { diffPoints, ORIGIN, Point, scalePoint } from \"../../utils/pointUtils\";\nimport config from \"../../config\";\nimport { Direction } from \"../../App\";\nimport * as React from \"react\";\nimport { CanvasState } from \"./Canvas\";\nimport { ConnectionKind } from \"../types\";\nimport { scaleDiverging } from \"d3-scale\";\n\nconst { activeNodeOutlineWidthPx, minRadiusPx, maxRadiusPx } = config;\nexport const DEFAULT_RADIUS = Math.floor((minRadiusPx + maxRadiusPx) / 2);\n\nfunction drawCircle(\n  context: CanvasRenderingContext2D,\n  center: Point,\n  radius: number,\n  color: string\n): void {\n  context.save();\n  context.beginPath();\n  context.arc(center.x, center.y, radius, 0, 2 * Math.PI);\n  context.fillStyle = color;\n  context.fill();\n  context.closePath();\n  context.restore();\n}\n\nfunction drawCircleOutline(\n  context: CanvasRenderingContext2D,\n  center: Point,\n  radius: number,\n  color: string\n): void {\n  context.save();\n  context.beginPath();\n  // inset\n  context.arc(\n    center.x,\n    center.y,\n    radius - activeNodeOutlineWidthPx / 2,\n    0,\n    2 * Math.PI\n  );\n  context.lineWidth = activeNodeOutlineWidthPx;\n  context.strokeStyle = color;\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nfunction drawHashPattern(\n  context: CanvasRenderingContext2D,\n  center: Point,\n  radius: number\n) {\n  context.save();\n  context.lineWidth = 2;\n  context.fillStyle = \"#FFFFFF\";\n\n  const delta = 4.5;\n  const buffer = 1;\n  const circle = 2;\n\n  // save the canvas above, now transform it for ease of drawing\n  context.translate(center.x, center.y);\n  context.rotate(Math.PI / 4);\n\n  // draw horizontal line\n  context.beginPath();\n  context.moveTo(-radius, 0);\n  context.lineTo(radius, 0);\n  context.stroke();\n\n  // draw smaller horizontal lines offset vertically from center\n  let h = 0; // vertical distance from center\n  while (h + delta < radius) {\n    h = h + delta;\n    const newRadius = radius * Math.sin(Math.acos(h / radius));\n    context.moveTo(-newRadius - buffer, h);\n    context.lineTo(newRadius + buffer, h);\n    context.stroke();\n    context.moveTo(-newRadius - buffer, -h);\n    context.lineTo(newRadius + buffer, -h);\n    context.stroke();\n  }\n  context.closePath();\n\n  // clip off the extra bits around the circle\n  context.beginPath();\n  context.arc(0, 0, radius + circle, 0, Math.PI * 2, false);\n  context.arc(0, 0, radius, 0, Math.PI * 2, true);\n  context.fill();\n\n  context.restore();\n}\n\nfunction drawNodeName(\n  context: CanvasRenderingContext2D,\n  name: string,\n  center: Point,\n  radius: number,\n  textDirection: Direction\n) {\n  const bufferText = 2;\n  context.save();\n  context.font = \"14px Helvetica\";\n  const textMetrics = context.measureText(name);\n  const width = textMetrics.width;\n  context.translate(center.x, center.y);\n  if (textDirection === \"D\") {\n    context.fillText(\n      name,\n      -width / 2,\n      textMetrics.actualBoundingBoxAscent + radius + bufferText\n    );\n  } else if (textDirection === \"R\") {\n    context.fillText(\n      name,\n      radius + bufferText,\n      textMetrics.actualBoundingBoxAscent / 2\n    );\n  } else if (textDirection === \"U\") {\n    context.fillText(\n      name,\n      -width / 2,\n      -(textMetrics.actualBoundingBoxDescent + radius + bufferText)\n    );\n  } else {\n    context.fillText(\n      name,\n      -(width + radius + bufferText),\n      textMetrics.actualBoundingBoxAscent / 2\n    );\n  }\n  context.restore();\n}\n\nexport function drawNode(\n  context: CanvasRenderingContext2D,\n  name: string,\n  center: Point,\n  radius: number,\n  color: string,\n  isActive: boolean,\n  isBoundary: boolean,\n  textDirection: Direction\n): void {\n  drawCircle(context, center, radius, color);\n  if (isActive) {\n    drawCircleOutline(context, center, radius, \"black\");\n  }\n  if (isBoundary) {\n    drawHashPattern(context, center, radius);\n  }\n  drawNodeName(context, name, center, radius, textDirection);\n}\n\nexport function drawBidirectionalArrow(\n  context: CanvasRenderingContext2D,\n  start: Point,\n  end: Point,\n  color: string,\n  startOffset = 0,\n  endOffset = 0\n): void {\n  context.save();\n  context.beginPath();\n  context.strokeStyle = color;\n  context.lineWidth = 2;\n  const headLength = 9;\n  const headWidth = 4;\n  const arrowGap = 0;\n  const dx = end.x - start.x;\n  const dy = end.y - start.y;\n  const angle = Math.atan2(dy, dx);\n  const length = Math.sqrt(dx * dx + dy * dy);\n  const adjLength = length - endOffset;\n\n  context.translate(start.x, start.y);\n  context.rotate(angle);\n\n  context.beginPath();\n  context.moveTo(startOffset, arrowGap);\n  context.lineTo(adjLength, arrowGap);\n  context.moveTo(adjLength - headLength, headWidth + arrowGap);\n  context.lineTo(adjLength, arrowGap);\n  context.lineTo(adjLength - headLength, -(headWidth - arrowGap));\n\n  context.moveTo(adjLength, -arrowGap);\n  context.lineTo(startOffset, -arrowGap);\n  context.moveTo(startOffset + headLength, -(headWidth + arrowGap));\n  context.lineTo(startOffset, -arrowGap);\n  context.lineTo(startOffset + headLength, headWidth - arrowGap);\n\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nexport function drawUnidirectionalArrow(\n  context: CanvasRenderingContext2D,\n  start: Point,\n  end: Point,\n  color: string,\n  startOffset = 0,\n  endOffset = 0\n): void {\n  context.save();\n  context.beginPath();\n  context.strokeStyle = color;\n  context.lineWidth = 2;\n  const headLength = 9;\n  const headWidth = 4;\n  const dx = end.x - start.x;\n  const dy = end.y - start.y;\n  const angle = Math.atan2(dy, dx);\n  const length = Math.sqrt(dx * dx + dy * dy);\n  const adjLength = length - endOffset;\n\n  context.translate(start.x, start.y);\n  context.rotate(angle);\n\n  context.beginPath();\n  context.moveTo(startOffset, 0);\n  context.lineTo(adjLength, 0);\n  context.moveTo(adjLength - headLength, -headWidth);\n  context.lineTo(adjLength, 0);\n  context.lineTo(adjLength - headLength, headWidth);\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nexport function drawArrowWithoutHead(\n  context: CanvasRenderingContext2D,\n  start: Point,\n  end: Point,\n  color: string,\n  startOffset = 0,\n  endOffset = 0\n): void {\n  context.save();\n  context.beginPath();\n  context.strokeStyle = color;\n  context.lineWidth = 2;\n  const dx = end.x - start.x;\n  const dy = end.y - start.y;\n  const angle = Math.atan2(dy, dx);\n  const length = Math.sqrt(dx * dx + dy * dy);\n  context.translate(start.x, start.y);\n  context.rotate(angle);\n  context.beginPath();\n  context.moveTo(startOffset, 0);\n  const adjLength = length - endOffset;\n  context.lineTo(adjLength, 0);\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nexport function drawClearBox(\n  context: CanvasRenderingContext2D,\n  start: Point,\n  end: Point,\n  color: string\n): void {\n  context.save();\n  context.beginPath();\n  context.fillStyle = color;\n  context.globalAlpha = 0.2;\n  context.fillRect(start.x, start.y, end.x - start.x, end.y - start.y);\n  context.closePath();\n\n  // outline\n  context.beginPath();\n  context.strokeStyle = color;\n  context.rect(start.x, start.y, end.x - start.x, end.y - start.y);\n  context.stroke();\n  context.closePath();\n\n  context.restore();\n}\n\nexport function drawConnection(\n  context: CanvasRenderingContext2D,\n  sourceCenter: Point,\n  sourceRadius: number,\n  targetCenter: Point,\n  targetRadius: number,\n  kind: ConnectionKind\n): void {\n  if (kind === \"bi\") {\n    drawBidirectionalArrow(\n      context,\n      sourceCenter,\n      targetCenter,\n      \"black\",\n      sourceRadius,\n      targetRadius\n    );\n  } else {\n    drawUnidirectionalArrow(\n      context,\n      sourceCenter,\n      targetCenter,\n      \"black\",\n      sourceRadius,\n      targetRadius\n    );\n  }\n}\n\nexport function intersectsCircle(\n  point: Point,\n  circleCenter: Point,\n  radius: number\n): boolean {\n  const deltaX = point.x - circleCenter.x;\n  const deltaY = point.y - circleCenter.y;\n  return Math.pow(deltaX, 2) + Math.pow(deltaY, 2) <= Math.pow(radius, 2);\n}\n\nexport function isInsideBox(\n  startBox: Point,\n  endBox: Point,\n  point: Point\n): boolean {\n  const [topLeft, bottomRight] =\n    startBox.x < endBox.x && startBox.y < endBox.y\n      ? [startBox, endBox]\n      : [endBox, startBox];\n\n  const [bottomLeft, topRight] =\n    startBox.x < endBox.x && startBox.y > endBox.y\n      ? [startBox, endBox]\n      : [endBox, startBox];\n\n  return (\n    (topLeft.x <= point.x &&\n      point.x <= bottomRight.x &&\n      topLeft.y <= point.y &&\n      point.y <= bottomRight.y) ||\n    (bottomLeft.x <= point.x &&\n      point.x <= topRight.x &&\n      topRight.y <= point.y &&\n      point.y <= bottomLeft.y)\n  );\n}\n\nexport function calculateMousePositionOnElement(\n  event: React.MouseEvent | MouseEvent,\n  element: HTMLElement\n): Point {\n  const viewportMousePos = { x: event.pageX, y: event.pageY };\n  const boundingRect = element.getBoundingClientRect();\n  const topLeftCanvasPos = { x: boundingRect.left, y: boundingRect.top };\n  return diffPoints(viewportMousePos, topLeftCanvasPos);\n}\n\nfunction canvasMouseToNodeCoords(\n  mouse: Point,\n  offset: Point,\n  scale: number\n): Point {\n  return diffPoints(scalePoint(mouse, scale), offset);\n}\n\nexport function mouseToNodeCoords(\n  event: React.MouseEvent | MouseEvent,\n  canvasState: CanvasState\n): Point {\n  if (canvasState.context) {\n    const canvasMouse = calculateMousePositionOnElement(\n      event,\n      canvasState.context.canvas\n    );\n    return canvasMouseToNodeCoords(\n      canvasMouse,\n      canvasState.canvasViewState.offset,\n      canvasState.canvasViewState.scale\n    );\n  } else {\n    return ORIGIN;\n  }\n}\n\nexport function rotatedDirection(direction: Direction): Direction {\n  // assume rotate counter-clockwise\n  if (direction === \"D\") {\n    return \"R\";\n  } else if (direction === \"R\") {\n    return \"U\";\n  } else if (direction === \"U\") {\n    return \"L\";\n  } else {\n    return \"D\";\n  }\n}\n\nexport function getCanvasCenter(\n  canvasWidth: number,\n  canvasHeight: number,\n  offset: Point,\n  scale: number\n): Point {\n  const topLeftPoint = offset;\n  const distanceToCenter = scalePoint(\n    { x: canvasWidth, y: canvasHeight },\n    2 * scale\n  );\n  return diffPoints(distanceToCenter, topLeftPoint);\n}\n\nexport function determineRadius(\n  capacitance: number,\n  allCapacitances: number[]\n): number {\n  const min = Math.min(...allCapacitances);\n  const max = Math.max(...allCapacitances);\n  // cap = min -> minRadius\n  // cap = max -> maxRadius\n  // radius = (cap - min) / (max - min) * 20 + 10\n  if (min === max) {\n    return DEFAULT_RADIUS;\n  }\n  return (\n    ((capacitance - min) / (max - min)) * (maxRadiusPx - minRadiusPx) +\n    minRadiusPx\n  );\n}\n\nexport function determineColor(\n  temperature: number,\n  allTemperatures: number[]\n): string {\n  const minTemp = Math.min(...allTemperatures);\n  const maxTemp = Math.max(...allTemperatures);\n  const range = maxTemp - minTemp;\n  const test = scaleDiverging<string>()\n    .domain([minTemp - range / 3, (minTemp + maxTemp) / 2, maxTemp + range / 3])\n    .range([\"blue\", \"#ababab\", \"red\"]);\n  return test(temperature);\n}\n","import * as React from \"react\";\nimport { useCallback, useLayoutEffect, useRef, useState } from \"react\";\nimport {\n  addPoints,\n  diffPoints,\n  ORIGIN,\n  Point,\n  scalePoint,\n} from \"../../../utils/pointUtils\";\nimport config from \"../../../config\";\nimport { calculateMousePositionOnElement } from \"../canvasUtils\";\nimport { CanvasViewState } from \"../Canvas\";\n\nconst { maxZoom, minZoom, zoomSensitivity, maxZoomDelta } = config;\n\nexport default function usePanZoomCanvas(\n  canvasRef: React.RefObject<HTMLCanvasElement>,\n  canvasViewState: CanvasViewState,\n  setCanvasViewState: (newCanvasViewState: CanvasViewState) => void\n): [\n  CanvasRenderingContext2D | null,\n  React.Dispatch<React.SetStateAction<CanvasRenderingContext2D | null>>,\n  (event: React.MouseEvent | MouseEvent) => void\n] {\n  const [context, setContext] = useState<CanvasRenderingContext2D | null>(null);\n  const mousePosRef = useRef<Point>(ORIGIN);\n  const lastMousePosRef = useRef<Point>(ORIGIN);\n  const lastCanvasViewState = useRef<CanvasViewState>(canvasViewState);\n\n  // functions for panning\n  const mouseMove = useCallback(\n    (event: React.MouseEvent | MouseEvent) => {\n      if (context) {\n        // update mouse position\n        const newMousePos = calculateMousePositionOnElement(\n          event,\n          context.canvas\n        );\n        lastMousePosRef.current = mousePosRef.current;\n        mousePosRef.current = newMousePos;\n\n        const mouseDiff = scalePoint(\n          diffPoints(mousePosRef.current, lastMousePosRef.current),\n          canvasViewState.scale\n        );\n        const newCanvasViewState = {\n          scale: canvasViewState.scale,\n          offset: addPoints(lastCanvasViewState.current.offset, mouseDiff),\n        };\n        setCanvasViewState(newCanvasViewState);\n        lastCanvasViewState.current = newCanvasViewState;\n      }\n    },\n    [context, canvasViewState.scale, setCanvasViewState]\n  );\n\n  const mouseUp = useCallback(() => {\n    document.removeEventListener(\"mousemove\", mouseMove);\n    document.removeEventListener(\"mouseup\", mouseUp);\n  }, [mouseMove]);\n\n  const startPan = useCallback(\n    (event: React.MouseEvent | MouseEvent) => {\n      if (context) {\n        document.addEventListener(\"mousemove\", mouseMove);\n        document.addEventListener(\"mouseup\", mouseUp);\n        mousePosRef.current = calculateMousePositionOnElement(\n          event,\n          context.canvas\n        );\n      }\n    },\n    [context, mouseMove, mouseUp]\n  );\n\n  // add event listener on canvas for zoom\n  useLayoutEffect(() => {\n    function handleWheel(event: WheelEvent) {\n      event.preventDefault();\n      if (context) {\n        // update mouse position\n        const newMousePos = calculateMousePositionOnElement(\n          event,\n          context.canvas\n        );\n        lastMousePosRef.current = mousePosRef.current;\n        mousePosRef.current = newMousePos;\n\n        // calculate new scale/zoom\n        const zoomDelta = event.deltaY / zoomSensitivity;\n        const zoom =\n          1 -\n          (Math.abs(zoomDelta) > maxZoomDelta\n            ? (zoomDelta / Math.abs(zoomDelta)) * maxZoomDelta\n            : zoomDelta);\n        const newScale = canvasViewState.scale * zoom;\n        if (newScale > maxZoom || newScale < minZoom) {\n          return;\n        }\n\n        // offset the canvas such that the point under the mouse doesn't move\n        const lastMouse = scalePoint(\n          mousePosRef.current,\n          canvasViewState.scale\n        );\n        const newMouse = scalePoint(mousePosRef.current, newScale);\n        const mouseOffset = diffPoints(lastMouse, newMouse);\n\n        const newCanvasViewState = {\n          offset: diffPoints(lastCanvasViewState.current.offset, mouseOffset),\n          scale: newScale,\n        };\n        setCanvasViewState(newCanvasViewState);\n        lastCanvasViewState.current = newCanvasViewState;\n      }\n    }\n\n    const canvasElem = canvasRef.current;\n    if (canvasElem) {\n      lastCanvasViewState.current = canvasViewState;\n      canvasElem.addEventListener(\"wheel\", handleWheel);\n      return () => canvasElem.removeEventListener(\"wheel\", handleWheel);\n    }\n  }, [canvasRef, canvasViewState, context, setCanvasViewState]);\n\n  return [context, setContext, startPan];\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { ORIGIN } from \"../../utils/pointUtils\";\nimport { CanvasState, CanvasViewState } from \"./Canvas\";\n\nconst StyledButtons = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst StyledButton = styled.button`\n  margin: 0.2em;\n`;\n\ntype CanvasControlsProps = {\n  setCanvasViewState: (canvasViewState: CanvasViewState) => void;\n  canvasState: CanvasState;\n  savedCanvasState: CanvasViewState;\n  setSavedCanvasState: (newSavedCanvasState: CanvasViewState) => void;\n};\n\nexport default function CanvasControls(\n  props: CanvasControlsProps\n): React.ReactElement {\n  return (\n    <StyledButtons>\n      <StyledButton\n        onClick={() =>\n          props.canvasState.context &&\n          props.setCanvasViewState({ offset: ORIGIN, scale: 1 })\n        }\n      >\n        Reset View\n      </StyledButton>\n      <StyledButton\n        onClick={() =>\n          props.canvasState.context &&\n          props.setCanvasViewState({\n            offset: props.savedCanvasState.offset,\n            scale: props.savedCanvasState.scale,\n          })\n        }\n      >\n        Reset View to Saved\n      </StyledButton>\n      <StyledButton\n        onClick={() => {\n          props.setSavedCanvasState({\n            offset: props.canvasState.canvasViewState.offset,\n            scale: props.canvasState.canvasViewState.scale,\n          });\n        }}\n      >\n        Save View\n      </StyledButton>\n    </StyledButtons>\n  );\n}\n","import * as React from \"react\";\nimport { ModalState } from \"../../App\";\nimport styled from \"styled-components/macro\";\n\nconst StyledModalControls = styled.div`\n  position: absolute;\n  right: 10px;\n  top: 10px;\n`;\n\nconst StyledModalControlButton = styled.button`\n  margin-left: 1em;\n`;\n\ntype ModalControlsProps = {\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n};\n\nexport default function ModalControls(\n  props: ModalControlsProps\n): React.ReactElement {\n  const { setModalState } = props;\n\n  return (\n    <StyledModalControls>\n      <StyledModalControlButton\n        onClick={() => setModalState({ visible: true, type: \"theory\" })}\n      >\n        Theory\n      </StyledModalControlButton>\n      <StyledModalControlButton\n        onClick={() => setModalState({ visible: true, type: \"tutorial\" })}\n      >\n        Tutorial\n      </StyledModalControlButton>\n      <StyledModalControlButton\n        onClick={() => setModalState({ visible: true, type: \"about\" })}\n      >\n        About\n      </StyledModalControlButton>\n    </StyledModalControls>\n  );\n}\n","import * as React from \"react\";\nimport { useLayoutEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport usePanZoomCanvas from \"./hooks/usePanZoomCanvas\";\nimport { Point } from \"../../utils/pointUtils\";\nimport CanvasControls from \"./CanvasControls\";\nimport useOnClickCanvas from \"./hooks/useOnClickCanvas\";\nimport { ModalState } from \"../../App\";\nimport ModalControls from \"./ModalControls\";\n\nconst StyledCanvasWrapper = styled.div`\n  display: block;\n  max-height: 100%;\n  position: relative;\n`;\n\nconst StyledCanvas = styled.canvas<{ cssWidth: number; cssHeight: number }>`\n  width: ${({ cssWidth }) => `${cssWidth}px`};\n  height: ${({ cssHeight }) => `${cssHeight}px`};\n`;\n\nexport type CanvasViewState = {\n  offset: Point;\n  scale: number;\n};\n\nexport type CanvasState = {\n  context: CanvasRenderingContext2D | null;\n  canvasViewState: CanvasViewState;\n  canvasWidth: number;\n  canvasHeight: number;\n};\n\nexport type CanvasProps = {\n  canvasWidth: number;\n  canvasHeight: number;\n  devicePixelRatio: number;\n  draw: (context: CanvasRenderingContext2D) => void;\n  onMouseDown: (\n    event: React.MouseEvent | MouseEvent,\n    canvasState: CanvasState,\n    defaultBehavior: (event: React.MouseEvent | MouseEvent) => void\n  ) => void;\n  handleDoubleClick: (\n    event: React.MouseEvent,\n    canvasState: CanvasState\n  ) => void;\n  canvasViewState: CanvasViewState;\n  setCanvasViewState: (newCanvasState: CanvasViewState) => void;\n  savedCanvasViewState: CanvasViewState;\n  setSavedCanvasViewState: (newSavedCanvasState: CanvasViewState) => void;\n  setKeyboardActive: React.Dispatch<React.SetStateAction<boolean>>;\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n};\n\nexport default function Canvas(props: CanvasProps): React.ReactElement {\n  const {\n    canvasWidth,\n    canvasHeight,\n    devicePixelRatio,\n    draw,\n    onMouseDown,\n    handleDoubleClick,\n    canvasViewState,\n    setCanvasViewState,\n    savedCanvasViewState,\n    setSavedCanvasViewState,\n    setKeyboardActive,\n    setModalState,\n  } = props;\n\n  // hooks\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  useOnClickCanvas(canvasRef, setKeyboardActive);\n  const [context, setContext, startPan] = usePanZoomCanvas(\n    canvasRef,\n    canvasViewState,\n    setCanvasViewState\n  );\n\n  // setup canvas and set context\n  useLayoutEffect(() => {\n    if (canvasRef.current) {\n      // get new drawing context\n      const renderCtx = canvasRef.current.getContext(\"2d\");\n      setContext(renderCtx);\n    }\n  }, [setContext]);\n\n  // draw\n  useLayoutEffect(() => {\n    if (context) {\n      // clear canvas\n      context.canvas.width = canvasWidth * devicePixelRatio;\n      context.canvas.height = canvasHeight * devicePixelRatio;\n\n      context.scale(\n        canvasViewState.scale * devicePixelRatio,\n        canvasViewState.scale * devicePixelRatio\n      );\n      context.translate(canvasViewState.offset.x, canvasViewState.offset.y);\n\n      draw(context);\n    }\n  }, [\n    canvasHeight,\n    canvasWidth,\n    context,\n    devicePixelRatio,\n    draw,\n    canvasViewState.offset.x,\n    canvasViewState.offset.y,\n    canvasViewState.scale,\n  ]);\n\n  return (\n    <StyledCanvasWrapper>\n      <ModalControls setModalState={setModalState} />\n      <CanvasControls\n        setCanvasViewState={setCanvasViewState}\n        canvasState={{\n          context,\n          canvasViewState,\n          canvasWidth,\n          canvasHeight,\n        }}\n        savedCanvasState={savedCanvasViewState}\n        setSavedCanvasState={setSavedCanvasViewState}\n      />\n      <StyledCanvas\n        ref={canvasRef}\n        width={canvasWidth * devicePixelRatio}\n        height={canvasHeight * devicePixelRatio}\n        cssWidth={canvasWidth}\n        cssHeight={canvasHeight}\n        onMouseDown={(event: React.MouseEvent | MouseEvent) =>\n          onMouseDown(\n            event,\n            { context, canvasViewState, canvasWidth, canvasHeight },\n            () => startPan(event)\n          )\n        }\n        onDoubleClick={(event: React.MouseEvent) =>\n          handleDoubleClick(event, {\n            context,\n            canvasViewState,\n            canvasWidth,\n            canvasHeight,\n          })\n        }\n      />\n    </StyledCanvasWrapper>\n  );\n}\n","import * as React from \"react\";\nimport { useEffect } from \"react\";\n\nexport default function useOnClickCanvas(\n  ref: React.RefObject<HTMLCanvasElement>,\n  onClickCanvas: React.Dispatch<React.SetStateAction<boolean>>\n): void {\n  useEffect(() => {\n    const handleClickOutside = (event: React.MouseEvent | MouseEvent) => {\n      const keyBoardActive =\n        !!ref.current && ref.current.contains(event.target as Node);\n      onClickCanvas(keyBoardActive);\n    };\n\n    // Bind the event listener\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [ref, onClickCanvas]);\n}\n","import { useCallback } from \"react\";\nimport {\n  determineColor,\n  determineRadius,\n  drawConnection,\n  drawNode,\n} from \"../components/Canvas/canvasUtils\";\nimport { AppConnection, AppNode } from \"../App\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\n\nexport default function useDraw(\n  appNodes: AppNode[],\n  appConnections: AppConnection[]\n): [\n  (context: CanvasRenderingContext2D) => void,\n  (canvasState: CanvasState) => void\n] {\n  const draw = useCallback(\n    (context: CanvasRenderingContext2D) => {\n      appNodes.forEach((node) => {\n        const nodeRadius = determineRadius(\n          node.capacitanceJPerDegK,\n          appNodes.map((node) => node.capacitanceJPerDegK)\n        );\n        const nodeColor = determineColor(\n          node.temperatureDegC,\n          appNodes.map((node) => node.temperatureDegC)\n        );\n        drawNode(\n          context,\n          node.name,\n          node.center,\n          nodeRadius,\n          nodeColor,\n          node.isActive,\n          node.isBoundary,\n          node.textDirection\n        );\n      });\n\n      appConnections.map((conn) => {\n        const { source, target, kind } = conn;\n        const sourceAppNode = appNodes.find((node) => node.id === source.id);\n        const targetAppNode = appNodes.find((node) => node.id === target.id);\n        if (sourceAppNode && targetAppNode) {\n          const sourceRadius = determineRadius(\n            sourceAppNode.capacitanceJPerDegK,\n            appNodes.map((node) => node.capacitanceJPerDegK)\n          );\n          const targetRadius = determineRadius(\n            targetAppNode.capacitanceJPerDegK,\n            appNodes.map((node) => node.capacitanceJPerDegK)\n          );\n          drawConnection(\n            context,\n            sourceAppNode.center,\n            sourceRadius,\n            targetAppNode.center,\n            targetRadius,\n            kind\n          );\n        }\n      });\n    },\n    [appConnections, appNodes]\n  );\n\n  const clearAndRedraw = useCallback(\n    (canvasState: CanvasState) => {\n      if (canvasState.context) {\n        canvasState.context.clearRect(\n          -canvasState.canvasViewState.offset.x,\n          -canvasState.canvasViewState.offset.y,\n          canvasState.canvasWidth / canvasState.canvasViewState.scale,\n          canvasState.canvasHeight / canvasState.canvasViewState.scale\n        );\n        draw(canvasState.context);\n      }\n    },\n    [draw]\n  );\n\n  return [draw, clearAndRedraw];\n}\n","import { HSConnection, makeConnection, makeNode } from \"hotstuff-network\";\nimport config from \"../config\";\nimport { AppConnection, AppNode } from \"../App\";\nimport { Point } from \"./pointUtils\";\n\nconst { newNodeNamePrefix } = config;\n\nexport function getNewAppNode(appNodes: AppNode[], center: Point): AppNode {\n  const numNodesWithDefaultPrefix = appNodes.filter((node) =>\n    node.name.startsWith(newNodeNamePrefix)\n  ).length;\n\n  const newNode = makeNode({\n    name:\n      numNodesWithDefaultPrefix === 0\n        ? `${newNodeNamePrefix}`\n        : `${newNodeNamePrefix} (${numNodesWithDefaultPrefix + 1})`,\n    temperatureDegC: config.defaultTempDegC,\n    capacitanceJPerDegK: config.defaultCapJPerDegK,\n    powerGenW: config.defaultPowerGenW,\n    isBoundary: false,\n  });\n\n  return {\n    ...newNode,\n    center: center,\n    isActive: false,\n    textDirection: \"D\",\n  };\n}\n\nexport function getNewAppConnection(\n  appNodes: AppNode[],\n  appConnections: AppConnection[]\n): AppConnection | undefined {\n  if (appNodes.length < 2) {\n    return;\n  }\n  let found: AppConnection | undefined = undefined;\n\n  appNodes.forEach((firstNode) => {\n    appNodes.forEach((secondNode) => {\n      if (!found && firstNode.id !== secondNode.id) {\n        const connectionForwardsExists = appConnections.find(\n          (conn) =>\n            conn.source.id === firstNode.id && conn.target.id === secondNode.id\n        );\n        const connectionBackwardsExists = appConnections.find(\n          (conn) =>\n            conn.source.id === secondNode.id && conn.target.id === firstNode.id\n        );\n        if (!connectionForwardsExists && !connectionBackwardsExists) {\n          const newConnection: HSConnection = makeConnection({\n            source: firstNode,\n            target: secondNode,\n            resistanceDegKPerW: config.defaultResistanceDegKPerW,\n            kind: \"bi\",\n          });\n\n          found = {\n            ...newConnection,\n            sourceName: firstNode.name,\n            targetName: secondNode.name,\n          };\n        }\n      }\n    });\n  });\n  return found;\n}\n","import React, { useCallback } from \"react\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\nimport {\n  determineRadius,\n  drawArrowWithoutHead,\n  intersectsCircle,\n  mouseToNodeCoords,\n} from \"../components/Canvas/canvasUtils\";\nimport { makeConnection } from \"hotstuff-network\";\nimport { AppConnection, AppNode } from \"../App\";\nimport config from \"../config\";\n\nconst { defaultResistanceDegKPerW, defaultConnectionKind } = config;\n\nexport default function useAddConnection(\n  appNodes: AppNode[],\n  appConnections: AppConnection[],\n  addConnection: (newConnection: AppConnection) => void,\n  clearAndRedraw: (canvasState: CanvasState) => void\n): (\n  event: React.MouseEvent | MouseEvent,\n  clickedNode: AppNode,\n  canvasState: CanvasState\n) => void {\n  const drawConnectionBeingMade = useCallback(\n    (\n      event: React.MouseEvent | MouseEvent,\n      clickedNode: AppNode,\n      canvasState: CanvasState\n    ) => {\n      if (canvasState.context) {\n        const nodeCoordsOfMouse = mouseToNodeCoords(event, canvasState);\n        clearAndRedraw(canvasState);\n        drawArrowWithoutHead(\n          canvasState.context,\n          clickedNode.center,\n          nodeCoordsOfMouse,\n          \"grey\"\n        );\n      }\n    },\n    [clearAndRedraw]\n  );\n\n  return useCallback(\n    (\n      event: React.MouseEvent | MouseEvent,\n      clickedNode: AppNode,\n      canvasState: CanvasState\n    ) => {\n      const drawConnWrapper = (event: React.MouseEvent | MouseEvent) => {\n        drawConnectionBeingMade(event, clickedNode, canvasState);\n      };\n\n      const mouseUp = (event: React.MouseEvent | MouseEvent) => {\n        document.removeEventListener(\"mousemove\", drawConnWrapper);\n        document.removeEventListener(\"mouseup\", mouseUp);\n\n        // if arrow released on a node, make new connection\n        const nodeCoordsOfMouse = mouseToNodeCoords(event, canvasState);\n        const mouseUpOnNode = appNodes.find((node) => {\n          const nodeRadius = determineRadius(\n            node.capacitanceJPerDegK,\n            appNodes.map((node) => node.capacitanceJPerDegK)\n          );\n          return (\n            intersectsCircle(nodeCoordsOfMouse, node.center, nodeRadius) &&\n            node.id !== clickedNode.id &&\n            !appConnections.some(\n              (conn) =>\n                (conn.source.id === node.id &&\n                  conn.target.id === clickedNode.id) ||\n                (conn.target.id === node.id &&\n                  conn.source.id === clickedNode.id)\n            )\n          );\n        });\n\n        if (mouseUpOnNode) {\n          const newConnection = {\n            ...makeConnection({\n              source: clickedNode,\n              target: mouseUpOnNode,\n              resistanceDegKPerW: defaultResistanceDegKPerW,\n              kind: defaultConnectionKind,\n            }),\n            sourceName: clickedNode.name,\n            targetName: mouseUpOnNode.name,\n          };\n          addConnection(newConnection);\n        } else {\n          clearAndRedraw(canvasState);\n        }\n      };\n      document.addEventListener(\"mousemove\", drawConnWrapper);\n      document.addEventListener(\"mouseup\", mouseUp);\n    },\n    [\n      addConnection,\n      appConnections,\n      appNodes,\n      clearAndRedraw,\n      drawConnectionBeingMade,\n    ]\n  );\n}\n","import React, { useCallback, useRef } from \"react\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\nimport { mouseToNodeCoords } from \"../components/Canvas/canvasUtils\";\nimport { AppNode } from \"../App\";\nimport { diffPoints } from \"../utils/pointUtils\";\nimport config from \"../config\";\n\nfunction getNewAppNodes(\n  clickedMouseEvent: React.MouseEvent | MouseEvent,\n  currentMouseEvent: React.MouseEvent | MouseEvent,\n  canvasState: CanvasState,\n  clickedNode: AppNode,\n  multiSelectKeyPressed: boolean,\n  activeNodes: AppNode[]\n): AppNode[] {\n  const offsetMouseToCenter = diffPoints(\n    mouseToNodeCoords(clickedMouseEvent, canvasState),\n    clickedNode.center\n  );\n\n  const newClickedCenter = diffPoints(\n    mouseToNodeCoords(currentMouseEvent, canvasState),\n    offsetMouseToCenter\n  );\n\n  const newClickedNode = {\n    ...clickedNode,\n    isActive: true,\n    center: newClickedCenter,\n  };\n\n  const newActiveNodes =\n    clickedNode.isActive || multiSelectKeyPressed\n      ? activeNodes.map((node) => {\n          const distanceFromClickedCenter = diffPoints(\n            clickedNode.center,\n            node.center\n          );\n          return {\n            ...node,\n            center: diffPoints(newClickedCenter, distanceFromClickedCenter),\n          };\n        })\n      : [];\n\n  return [newClickedNode, ...newActiveNodes];\n}\n\nexport default function useMoveNode(\n  updateNodes: (nodesToUpdate: AppNode[], clearActiveNodes?: boolean) => void\n): (\n  event: React.MouseEvent | MouseEvent,\n  clickedNode: AppNode,\n  activeNodes: AppNode[],\n  canvasState: CanvasState\n) => void {\n  const movedRef = useRef<boolean>(false);\n\n  return useCallback(\n    (\n      mouseDownEvent: React.MouseEvent | MouseEvent,\n      clickedNode: AppNode,\n      activeNodes: AppNode[],\n      canvasState: CanvasState\n    ) => {\n      const multiSelectKeyPressed = mouseDownEvent[config.multiSelectKey];\n      const moveNode = (currentMouseEvent: React.MouseEvent | MouseEvent) => {\n        if (canvasState.context) {\n          movedRef.current = true;\n          const newNodes = getNewAppNodes(\n            mouseDownEvent,\n            currentMouseEvent,\n            canvasState,\n            clickedNode,\n            multiSelectKeyPressed,\n            activeNodes\n          );\n          updateNodes(newNodes, !currentMouseEvent[config.multiSelectKey]);\n        }\n      };\n      const mouseUp = (mouseUpEvent: React.MouseEvent | MouseEvent) => {\n        document.removeEventListener(\"mousemove\", moveNode);\n        document.removeEventListener(\"mouseup\", mouseUp);\n        const newNodes = getNewAppNodes(\n          mouseDownEvent,\n          mouseUpEvent,\n          canvasState,\n          clickedNode,\n          multiSelectKeyPressed,\n          activeNodes\n        );\n        updateNodes(newNodes, !multiSelectKeyPressed);\n        movedRef.current = false;\n      };\n      document.addEventListener(\"mousemove\", moveNode);\n      document.addEventListener(\"mouseup\", mouseUp);\n    },\n    [updateNodes]\n  );\n}\n","import React, { useCallback } from \"react\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\nimport {\n  drawClearBox,\n  isInsideBox,\n  mouseToNodeCoords,\n} from \"../components/Canvas/canvasUtils\";\nimport { AppNode } from \"../App\";\n\nexport default function useMultiSelect(\n  appNodes: AppNode[],\n  setActiveNodes: (activeNodeIds: string[]) => void,\n  clearAndRedraw: (canvasState: CanvasState) => void\n): (event: React.MouseEvent | MouseEvent, canvasState: CanvasState) => void {\n  return useCallback(\n    (event: React.MouseEvent | MouseEvent, canvasState: CanvasState) => {\n      const boxStart = mouseToNodeCoords(event, canvasState);\n      const drawBox = (event: React.MouseEvent | MouseEvent) => {\n        if (canvasState.context) {\n          clearAndRedraw(canvasState);\n          drawClearBox(\n            canvasState.context,\n            boxStart,\n            mouseToNodeCoords(event, canvasState),\n            \"grey\"\n          );\n        }\n      };\n      const mouseUp = (event: React.MouseEvent | MouseEvent) => {\n        document.removeEventListener(\"mousemove\", drawBox);\n        document.removeEventListener(\"mouseup\", mouseUp);\n\n        const boxEnd = mouseToNodeCoords(event, canvasState);\n        const activeNodeIds = appNodes\n          .filter(\n            (node) =>\n              isInsideBox(boxStart, boxEnd, node.center) || node.isActive\n          )\n          .map((node) => node.id);\n        setActiveNodes(activeNodeIds);\n      };\n      document.addEventListener(\"mousemove\", drawBox);\n      document.addEventListener(\"mouseup\", mouseUp);\n    },\n    [appNodes, clearAndRedraw, setActiveNodes]\n  );\n}\n","import * as React from \"react\";\nimport { useCallback } from \"react\";\nimport {\n  determineRadius,\n  intersectsCircle,\n  mouseToNodeCoords,\n} from \"../components/Canvas/canvasUtils\";\nimport { AppConnection, AppNode } from \"../App\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\nimport useAddConnection from \"./useAddConnection\";\nimport useMoveNode from \"./useMoveNode\";\nimport useMultiSelect from \"./useMultiSelect\";\nimport config from \"../config\";\n\nexport default function useOnMouseDown(\n  appNodes: AppNode[],\n  appConnections: AppConnection[],\n  addConnection: (newConnection: AppConnection) => void,\n  updateNodes: (nodesToUpdate: AppNode[], clearActiveNodes?: boolean) => void,\n  setActiveNodes: (activeNodeIds: string[]) => void,\n  clearActiveNodes: () => void,\n  clearAndRedraw: (canvasState: CanvasState) => void\n): (\n  event: React.MouseEvent | MouseEvent,\n  canvasState: CanvasState,\n  defaultBehavior: (event: React.MouseEvent | MouseEvent) => void\n) => void {\n  const makeNewConnection = useAddConnection(\n    appNodes,\n    appConnections,\n    addConnection,\n    clearAndRedraw\n  );\n  const moveNode = useMoveNode(updateNodes);\n  const multiSelect = useMultiSelect(appNodes, setActiveNodes, clearAndRedraw);\n\n  return useCallback(\n    (\n      mouseDownEvent: React.MouseEvent | MouseEvent,\n      canvasState: CanvasState,\n      defaultBehavior: (event: React.MouseEvent | MouseEvent) => void\n    ) => {\n      const nodeCoordsOfMouse = mouseToNodeCoords(mouseDownEvent, canvasState);\n\n      const activeNodes = appNodes.filter((node) => node.isActive);\n      const activeNodeIds = activeNodes.map((node) => node.id);\n\n      const clickedNode = appNodes.find((node) => {\n        const nodeRadius = determineRadius(\n          node.capacitanceJPerDegK,\n          appNodes.map((node) => node.capacitanceJPerDegK)\n        );\n        return intersectsCircle(nodeCoordsOfMouse, node.center, nodeRadius);\n      });\n\n      if (clickedNode) {\n        if (mouseDownEvent.altKey) {\n          makeNewConnection(mouseDownEvent, clickedNode, canvasState);\n        } else if (\n          mouseDownEvent[config.multiSelectKey] &&\n          activeNodeIds.includes(clickedNode.id)\n        ) {\n          setActiveNodes(activeNodeIds.filter((id) => id !== clickedNode.id));\n        } else {\n          moveNode(mouseDownEvent, clickedNode, activeNodes, canvasState);\n        }\n      } else {\n        if (mouseDownEvent[config.multiSelectKey]) {\n          multiSelect(mouseDownEvent, canvasState);\n        } else {\n          // only clear active nodes if click with no pan\n          const onMouseUp = (mouseUpEvent: React.MouseEvent | MouseEvent) => {\n            if (\n              mouseUpEvent.clientX === mouseDownEvent.clientX &&\n              mouseUpEvent.clientY === mouseDownEvent.clientY\n            ) {\n              clearActiveNodes();\n            }\n            document.removeEventListener(\"mouseup\", onMouseUp);\n          };\n          document.addEventListener(\"mouseup\", onMouseUp);\n          defaultBehavior(mouseDownEvent);\n        }\n      }\n    },\n    [\n      appNodes,\n      clearActiveNodes,\n      moveNode,\n      multiSelect,\n      makeNewConnection,\n      setActiveNodes,\n    ]\n  );\n}\n","import * as React from \"react\";\nimport { useRef } from \"react\";\nimport { diffPoints, Point } from \"../utils/pointUtils\";\n\nexport default function useClickAndDragElement(events: {\n  onDragX?: (deltaXPx: number) => void;\n  onDragY?: (deltaYPx: number) => void;\n}): (mouseDownEvent: React.MouseEvent | MouseEvent) => void {\n  const lastMousePos = useRef<Point | undefined>(undefined);\n\n  const { onDragX, onDragY } = events;\n\n  const onMouseUp = () => {\n    document.removeEventListener(\"mousemove\", onMouseMove);\n    document.removeEventListener(\"mouseup\", onMouseUp);\n  };\n\n  const onMouseMove = (mouseMoveEvent: React.MouseEvent | MouseEvent) => {\n    if (lastMousePos.current) {\n      const currentMousePos = {\n        x: mouseMoveEvent.pageX,\n        y: mouseMoveEvent.pageY,\n      };\n      const diff = diffPoints(currentMousePos, lastMousePos.current);\n      onDragX && onDragX(diff.x);\n      onDragY && onDragY(diff.y);\n      lastMousePos.current = currentMousePos;\n    }\n  };\n\n  return (mouseDownEvent: React.MouseEvent | MouseEvent) => {\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n    lastMousePos.current = { x: mouseDownEvent.pageX, y: mouseDownEvent.pageY };\n  };\n}\n","import styled from \"styled-components/macro\";\n\nexport const StyledApp = styled.div<{ height: number; modalOpen: boolean }>`\n  display: flex;\n  height: ${(props) => props.height}px;\n  filter: ${(props) => (props.modalOpen ? \"blur(5px)\" : \"unset\")};\n  pointer-events: ${(props) => (props.modalOpen ? \"none\" : \"unset\")};\n  user-select: none;\n  -webkit-user-select: none; /* Chrome/Safari */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* IE10+ */\n`;\n\nexport const StyledDraggableBorder = styled.div`\n  position: absolute;\n  z-index: 1;\n`;\n\nexport const StyledHorizontalBorder = styled(StyledDraggableBorder)<{\n  width: number;\n  y: number;\n  left: number;\n}>`\n  width: ${(props) => props.width * 100}%;\n  height: 10px;\n  top: ${(props) => props.y * 100}%;\n  transform: translate(0, -5px);\n  cursor: row-resize;\n  left: ${(props) => props.left * 100}%;\n`;\n\nexport const StyledVerticalBorder = styled(StyledDraggableBorder)<{\n  x: number;\n}>`\n  height: 100%;\n  width: 10px;\n  left: ${(props) => props.x * 100}%;\n  transform: translate(-5px, 0);\n  cursor: col-resize;\n`;\n\nexport const StyledWorkspace = styled.div<{ height: number; width: number }>`\n  height: ${(props) => props.height}px;\n  width: ${(props) => props.width}px;\n`;\n\nexport const StyledCanvas = styled.div<{ height: number }>`\n  width: 100%;\n  height: ${(props) => props.height}px;\n`;\n","import * as React from \"react\";\nimport { ModalState } from \"../../App\";\nimport styled from \"styled-components/macro\";\n\nconst StyledConfirmationModal = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 2em;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledConfirmationText = styled.p`\n  margin: 0.8em;\n  font-size: 1.5em;\n  font-weight: bold;\n  max-width: 800px;\n  text-align: center;\n`;\n\nconst StyledConfirmationButtons = styled.div`\n  display: flex;\n`;\n\nconst StyledConfirmationButton = styled.button`\n  font-size: 1.5em;\n  margin-left: 1em;\n  margin-right: 1em;\n  min-width: 100px;\n`;\n\ntype ConfirmationModalProps = {\n  modalState: ModalState;\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n};\n\nexport default function ConfirmationModal(\n  props: ConfirmationModalProps\n): React.ReactElement {\n  const { modalState, setModalState } = props;\n\n  return (\n    <StyledConfirmationModal>\n      {modalState.confirmText &&\n        modalState.confirmText.map((text) => (\n          <StyledConfirmationText key={text}>{text}</StyledConfirmationText>\n        ))}\n      <StyledConfirmationButtons>\n        <StyledConfirmationButton\n          onClick={() => setModalState((prev) => ({ ...prev, visible: false }))}\n        >\n          No\n        </StyledConfirmationButton>\n        <StyledConfirmationButton\n          onClick={() => {\n            modalState.onConfirm && modalState.onConfirm();\n            setModalState((prev) => ({ ...prev, visible: false }));\n          }}\n        >\n          Yes\n        </StyledConfirmationButton>\n      </StyledConfirmationButtons>\n    </StyledConfirmationModal>\n  );\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { MathComponent } from \"mathjax-react\";\n\nconst StyledTheoryModal = styled.div`\n  width: 80%;\n  max-width: 1200px;\n`;\n\nconst StyledTitle = styled.h1``;\n\nconst StyledText = styled.p``;\n\nconst StyledLink = styled.a``;\n\nconst StyledTheoryText = styled.p`\n  font-size: 1.5em;\n  font-weight: bold;\n  max-width: 800px;\n  text-align: center;\n`;\n\nconst StyledTheoryButtons = styled.div`\n  display: flex;\n`;\n\nconst StyledTheoryButton = styled.button`\n  font-size: 1.5em;\n  margin-left: 1em;\n  margin-right: 1em;\n  min-width: 100px;\n`;\n\nexport default function TheoryModal(): React.ReactElement {\n  return (\n    <StyledTheoryModal>\n      <StyledTitle>How Does this Thermal Model Work?</StyledTitle>\n      <StyledText>\n        The thermal model used by hotstuff.network is a simple, linear,\n        &quot;state space&quot; numerical model based off the following\n        equation:\n        <MathComponent display={true} tex={String.raw`\\int_0^1 x^2\\ dx`} />\n      </StyledText>\n      <StyledText>\n        The source code for the entire model can be seen{\" \"}\n        <StyledLink\n          href={\n            \"https://github.com/robinovitch61/hotstuff.network/tree/main/packages/hotstuff-network\"\n          }\n          target={\"_blank\"}\n          rel=\"noreferrer\"\n        >\n          here as a standalone npm package\n        </StyledLink>{\" \"}\n        - contributions are welcome!\n      </StyledText>\n    </StyledTheoryModal>\n  );\n}\n","import * as React from \"react\";\nimport { useRef } from \"react\";\nimport { ModalState } from \"../../App\";\nimport styled from \"styled-components/macro\";\nimport useOnClickOutside from \"../../hooks/useOnClickOutside\";\nimport ConfirmationModal from \"./ConfirmationModal\";\nimport TheoryModal from \"./TheoryModal\";\n\nconst StyledModal = styled.div<{ visible: boolean }>`\n  position: absolute;\n  width: 80vw;\n  height: 90vh;\n  max-width: 1400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  border: 3px solid black;\n  z-index: 10;\n  background: white;\n  display: ${(props) => (props.visible ? \"flex\" : \"none\")};\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledExitButton = styled.button`\n  position: absolute;\n  right: 1em;\n  top: 1em;\n  font-size: 1.2em;\n`;\n\nfunction getModalContent(\n  modalState: ModalState,\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>\n): React.ReactElement {\n  const type = modalState.type;\n\n  if (type === \"confirm\") {\n    return (\n      <ConfirmationModal\n        modalState={modalState}\n        setModalState={setModalState}\n      />\n    );\n  } else if (type === \"theory\") {\n    return <TheoryModal />;\n  } else {\n    return <h1>{type}</h1>;\n  }\n}\n\ntype ModalProps = {\n  modalState: ModalState;\n  setModalState: React.Dispatch<React.SetStateAction<ModalState>>;\n};\n\nexport default function Modal(props: ModalProps): React.ReactElement {\n  const { modalState, setModalState } = props;\n\n  const modalRef = useRef<HTMLDivElement>(null);\n  useOnClickOutside(modalRef, () =>\n    setModalState((prev) => ({ ...prev, visible: false }))\n  );\n\n  const modalContent = getModalContent(modalState, setModalState);\n\n  return (\n    <StyledModal ref={modalRef} visible={modalState.visible}>\n      <StyledExitButton\n        onClick={() =>\n          setModalState((prevState) => ({\n            ...prevState,\n            visible: false,\n          }))\n        }\n      >\n        X\n      </StyledExitButton>\n      {modalContent}\n    </StyledModal>\n  );\n}\n","import * as React from \"react\";\nimport { useEffect } from \"react\";\n\nexport default function useOnClickOutside(\n  ref: React.RefObject<HTMLDivElement>,\n  onClickOutside: () => void\n): void {\n  useEffect(() => {\n    const listener = (\n      event: React.MouseEvent | MouseEvent | React.TouchEvent | TouchEvent\n    ) => {\n      event.preventDefault();\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target as Node | null)) {\n        return;\n      }\n      onClickOutside();\n    };\n    document.addEventListener(\"mousedown\", listener);\n    document.addEventListener(\"touchstart\", listener);\n    return () => {\n      document.removeEventListener(\"mousedown\", listener);\n      document.removeEventListener(\"touchstart\", listener);\n    };\n  }, [ref, onClickOutside]);\n}\n","import { HSConnection, HSNode, ModelOutput, run } from \"hotstuff-network\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport { Point } from \"./utils/pointUtils\";\nimport Sidebar from \"./components/Sidebar/Sidebar\";\nimport Plot from \"./components/Plot/Plot\";\nimport config from \"./config\";\nimport useWindowSize from \"./components/Canvas/hooks/useWindowSize\";\nimport Canvas, { CanvasViewState } from \"./components/Canvas/Canvas\";\nimport useDraw from \"./hooks/useDraw\";\nimport useDoubleClick from \"./hooks/useDoubleClick\";\nimport useNodeConnectionUtils from \"./hooks/useNodeConnectionUtils\";\nimport useOnMouseDown from \"./hooks/useOnMouseDown\";\nimport useKeyDown from \"./hooks/useKeyDown\";\nimport { defaultAppState, defaultModalState } from \"./default\";\nimport useSessionStorageState from \"./hooks/useSessionStorageState\";\nimport { getCanvasCenter } from \"./components/Canvas/canvasUtils\";\nimport {\n  getNewAppConnection,\n  getNewAppNode,\n} from \"./utils/nodeConnectionUtils\";\nimport useAppStateModifiers from \"./hooks/useAppStateModifiers\";\nimport useResizablePanels from \"./hooks/useResizablePanels\";\nimport {\n  StyledApp,\n  StyledCanvas,\n  StyledHorizontalBorder,\n  StyledVerticalBorder,\n  StyledWorkspace,\n} from \"./style\";\nimport Modal from \"./components/Modal/Modal\";\n\nconst { plotMargin, tabHeightPx, plotHeightBufferPx } = config;\n\nexport type Direction = \"L\" | \"R\" | \"U\" | \"D\";\n\nexport type AppNode = HSNode & {\n  center: Point;\n  isActive: boolean;\n  textDirection: Direction;\n};\n\nexport type AppConnection = HSConnection & {\n  sourceName: string;\n  targetName: string;\n};\n\nexport type Timing = {\n  timeStepS: number;\n  totalTimeS: number;\n};\n\nexport type PanelSizes = {\n  editorWidthFraction: number;\n  canvasHeightFraction: number;\n  tableHeightFraction: number;\n};\n\nexport type ModalType = \"theory\" | \"tutorial\" | \"about\" | \"confirm\";\n\nexport type ModalState = {\n  visible: boolean;\n  type: ModalType;\n  onConfirm?: () => void;\n  confirmText?: string[];\n};\n\nexport type AppState = {\n  output?: ModelOutput;\n  timing: Timing;\n  nodes: AppNode[];\n  connections: AppConnection[];\n  canvasViewState: CanvasViewState;\n  savedCanvasState: CanvasViewState;\n  panelSizes: PanelSizes;\n};\n\nexport default function App(): React.ReactElement {\n  const [appState, setAppState] = useSessionStorageState<AppState>(\n    defaultAppState,\n    \"hotstuffAppState\"\n  );\n\n  const [modalState, setModalState] = useState<ModalState>(defaultModalState);\n\n  const [\n    setAppNodes,\n    setAppConnections,\n    setCanvasViewState,\n    setSavedCanvasState,\n    setTiming,\n    setModelOutput,\n  ] = useAppStateModifiers(setAppState);\n\n  const [\n    addNode,\n    addConnection,\n    updateNodes,\n    deleteNodes,\n    updateConnections,\n    deleteConnections,\n    setActiveNodes,\n    clearActiveNodes,\n  ] = useNodeConnectionUtils(\n    appState.nodes,\n    setAppNodes,\n    appState.connections,\n    setAppConnections,\n    setModelOutput\n  );\n\n  const [keyboardActive, setKeyboardActive] = useState<boolean>(true);\n  useKeyDown(keyboardActive, appState.nodes, setAppNodes, deleteNodes);\n\n  const [draw, clearAndRedraw] = useDraw(appState.nodes, appState.connections);\n  const handleDoubleClick = useDoubleClick(\n    appState.nodes,\n    addNode,\n    updateNodes\n  );\n  const onMouseDown = useOnMouseDown(\n    appState.nodes,\n    appState.connections,\n    addConnection,\n    updateNodes,\n    setActiveNodes,\n    clearActiveNodes,\n    clearAndRedraw\n  );\n\n  const [size, ratio] = useWindowSize();\n  const [windowWidth, windowHeight] = size;\n\n  const [\n    canvasPlotBorderRef,\n    onMouseDownOnCanvasPlotBorder,\n    leftRightBorderRef,\n    onMouseDownOnLeftRightBorder,\n    tableControlsBorderRef,\n    onMouseDownOnTableControlsBorder,\n  ] = useResizablePanels(setAppState, windowHeight, windowWidth);\n\n  // width/heights\n  const workspaceWidth = windowWidth;\n  const workspaceHeight = windowHeight;\n  const canvasHeight = windowHeight * appState.panelSizes.canvasHeightFraction;\n  const canvasWidth =\n    windowWidth * (1 - appState.panelSizes.editorWidthFraction);\n  const plotHeight =\n    (1 - appState.panelSizes.canvasHeightFraction) * windowHeight -\n    tabHeightPx -\n    plotHeightBufferPx;\n  const plotWidth = canvasWidth;\n  const editorWidth = appState.panelSizes.editorWidthFraction * windowWidth;\n\n  const plot = useMemo(() => {\n    return (\n      <Plot\n        plotDimensions={{\n          height: plotHeight,\n          width: plotWidth,\n          margin: plotMargin,\n        }}\n        modelOutput={appState.output}\n      />\n    );\n  }, [appState.output, plotHeight, plotWidth]);\n\n  const addNodeInCenterOfCanvas = useCallback(() => {\n    addNode(\n      getNewAppNode(\n        appState.nodes,\n        getCanvasCenter(\n          canvasWidth,\n          canvasHeight,\n          appState.canvasViewState.offset,\n          appState.canvasViewState.scale\n        )\n      )\n    );\n  }, [\n    addNode,\n    appState.canvasViewState.offset,\n    appState.canvasViewState.scale,\n    appState.nodes,\n    canvasHeight,\n    canvasWidth,\n  ]);\n\n  const createNewLogicalConnection = useCallback(() => {\n    const newConnection = getNewAppConnection(\n      appState.nodes,\n      appState.connections\n    );\n    if (newConnection !== undefined) {\n      addConnection(newConnection);\n    }\n  }, [addConnection, appState.connections, appState.nodes]);\n\n  return (\n    <div>\n      <Modal modalState={modalState} setModalState={setModalState} />\n      <StyledApp height={windowHeight} modalOpen={modalState.visible}>\n        <StyledHorizontalBorder\n          ref={canvasPlotBorderRef}\n          onMouseDown={onMouseDownOnCanvasPlotBorder}\n          y={appState.panelSizes.canvasHeightFraction}\n          width={1 - appState.panelSizes.editorWidthFraction}\n          left={0}\n        />\n        <StyledVerticalBorder\n          ref={leftRightBorderRef}\n          onMouseDown={onMouseDownOnLeftRightBorder}\n          x={1 - appState.panelSizes.editorWidthFraction}\n        />\n        <StyledHorizontalBorder\n          ref={tableControlsBorderRef}\n          onMouseDown={onMouseDownOnTableControlsBorder}\n          y={appState.panelSizes.tableHeightFraction}\n          width={appState.panelSizes.editorWidthFraction}\n          left={1 - appState.panelSizes.editorWidthFraction}\n        />\n\n        <StyledWorkspace\n          height={workspaceHeight}\n          width={(1 - appState.panelSizes.editorWidthFraction) * workspaceWidth}\n        >\n          <StyledCanvas height={canvasHeight}>\n            <Canvas\n              canvasWidth={canvasWidth}\n              canvasHeight={canvasHeight}\n              devicePixelRatio={ratio}\n              draw={draw}\n              onMouseDown={onMouseDown}\n              handleDoubleClick={handleDoubleClick}\n              canvasViewState={appState.canvasViewState}\n              setCanvasViewState={setCanvasViewState}\n              savedCanvasViewState={appState.savedCanvasState}\n              setSavedCanvasViewState={setSavedCanvasState}\n              setKeyboardActive={setKeyboardActive}\n              setModalState={setModalState}\n            />\n          </StyledCanvas>\n          {plot}\n        </StyledWorkspace>\n        <Sidebar\n          appState={appState}\n          setAppState={setAppState}\n          setModalState={setModalState}\n          height={windowHeight}\n          width={editorWidth}\n          setTiming={setTiming}\n          onAddNode={addNodeInCenterOfCanvas}\n          onAddConnection={createNewLogicalConnection}\n          updateNodes={(nodes: AppNode[]) => {\n            updateNodes(nodes);\n            setModelOutput(undefined);\n          }}\n          deleteNodes={deleteNodes}\n          updateConnections={(conns: AppConnection[]) => {\n            updateConnections(conns);\n            setModelOutput(undefined);\n          }}\n          deleteConnections={deleteConnections}\n          onRunModel={() => {\n            const output = run({\n              nodes: appState.nodes,\n              connections: appState.connections,\n              timeStepS: appState.timing.timeStepS,\n              totalTimeS: appState.timing.totalTimeS,\n            });\n            if (output.errors?.length) {\n              output.errors.forEach((error) => console.error(error.message));\n            }\n            setModelOutput(output);\n          }}\n        />\n      </StyledApp>\n    </div>\n  );\n}\n","import * as React from \"react\";\n\nexport default function useSessionStorageState<T>(\n  defaultValue: T,\n  key: string\n): [T, React.Dispatch<React.SetStateAction<T>>] {\n  const [value, setValue] = React.useState<T>(() => {\n    const localState = window.sessionStorage.getItem(key);\n    if (localState === null || localState === undefined) {\n      return defaultValue;\n    } else {\n      return JSON.parse(localState) as T;\n    }\n  });\n\n  React.useEffect(() => {\n    window.sessionStorage.setItem(key, JSON.stringify(value));\n  }, [key, value]);\n  return [value, setValue];\n}\n","import * as React from \"react\";\nimport { useCallback } from \"react\";\nimport { CanvasViewState } from \"../components/Canvas/Canvas\";\nimport { ModelOutput } from \"hotstuff-network\";\nimport { AppConnection, AppNode, AppState, Timing } from \"../App\";\n\nexport default function useAppStateModifiers(\n  setAppState: React.Dispatch<React.SetStateAction<AppState>>\n): [\n  (newNodes: AppNode[]) => void,\n  (newConnections: AppConnection[]) => void,\n  (newCanvasState: CanvasViewState) => void,\n  (newCanvasState: CanvasViewState) => void,\n  (newTiming: Timing) => void,\n  (newModelOutput: ModelOutput | undefined) => void\n] {\n  const setAppNodes = useCallback(\n    (newNodes: AppNode[]) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        nodes: newNodes,\n      }));\n    },\n    [setAppState]\n  );\n\n  const setAppConnections = useCallback(\n    (newConnections: AppConnection[]) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        connections: newConnections,\n      }));\n    },\n    [setAppState]\n  );\n\n  const setCanvasViewState = useCallback(\n    (newCanvasState: CanvasViewState) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        canvasViewState: newCanvasState,\n      }));\n    },\n    [setAppState]\n  );\n\n  const setSavedCanvasState = useCallback(\n    (newSavedCanvasState: CanvasViewState) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        savedCanvasState: newSavedCanvasState,\n      }));\n    },\n    [setAppState]\n  );\n\n  const setTiming = useCallback(\n    (newTiming: Timing) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        timing: newTiming,\n        output: undefined,\n      }));\n    },\n    [setAppState]\n  );\n\n  const setModelOutput = useCallback(\n    (newModelOutput: ModelOutput | undefined) => {\n      setAppState((prevState) => ({\n        ...prevState,\n        output: newModelOutput,\n      }));\n    },\n    [setAppState]\n  );\n\n  return [\n    setAppNodes,\n    setAppConnections,\n    setCanvasViewState,\n    setSavedCanvasState,\n    setTiming,\n    setModelOutput,\n  ];\n}\n","import { useCallback } from \"react\";\nimport { AppConnection, AppNode } from \"../App\";\nimport { ModelOutput } from \"hotstuff-network\";\n\nexport default function useNodeConnectionUtils(\n  appNodes: AppNode[],\n  setAppNodes: (newNodes: AppNode[]) => void,\n  appConnections: AppConnection[],\n  setAppConnections: (newConnections: AppConnection[]) => void,\n  setModelOutput: (newModelOutput: ModelOutput | undefined) => void\n): [\n  (node: AppNode) => void,\n  (connection: AppConnection) => void,\n  (nodesToUpdate: AppNode[], clearActiveNodes?: boolean) => void,\n  (nodeIds: string[]) => void,\n  (connsToUpdate: AppConnection[]) => void,\n  (connIds: string[]) => void,\n  (activeNodeIds: string[]) => void,\n  () => void\n] {\n  const addNode = useCallback(\n    (node: AppNode) => {\n      const newNodes = appNodes.map((node) => ({\n        ...node,\n        isActive: false,\n      }));\n      newNodes.push({ ...node, isActive: true });\n      setAppNodes(newNodes);\n      setModelOutput(undefined);\n    },\n    [appNodes, setAppNodes, setModelOutput]\n  );\n\n  const addConnection = useCallback(\n    (connection: AppConnection) => {\n      setAppConnections([...appConnections, connection]);\n      setModelOutput(undefined);\n    },\n    [appConnections, setAppConnections, setModelOutput]\n  );\n\n  const updateNodes = useCallback(\n    (nodesToUpdate: AppNode[], clearActiveNodes = false) => {\n      const newNodes = appNodes.map((node) => {\n        const nodeToUpdate = nodesToUpdate.find(\n          (newNode) => newNode.id === node.id\n        );\n        if (nodeToUpdate) {\n          return nodeToUpdate;\n        } else {\n          if (clearActiveNodes) {\n            return { ...node, isActive: false };\n          } else {\n            return node;\n          }\n        }\n      });\n      setAppNodes(newNodes);\n\n      const newConnections = appConnections.map((prevConn) => {\n        const newSourceNode = nodesToUpdate.find(\n          (nodeToUpdate) => prevConn.source.id == nodeToUpdate.id\n        );\n        if (newSourceNode) {\n          return {\n            ...prevConn,\n            source: newSourceNode,\n            sourceName: newSourceNode.name,\n          };\n        }\n\n        const newTargetNode = nodesToUpdate.find(\n          (nodeToUpdate) => prevConn.target.id == nodeToUpdate.id\n        );\n        if (newTargetNode) {\n          return {\n            ...prevConn,\n            target: newTargetNode,\n            targetName: newTargetNode.name,\n          };\n        }\n        return prevConn;\n      });\n      setAppConnections(newConnections);\n    },\n    [appConnections, appNodes, setAppConnections, setAppNodes]\n  );\n\n  const deleteNodes = useCallback(\n    (nodeIds: string[]) => {\n      const newConnections = appConnections.filter(\n        (conn) =>\n          !nodeIds.includes(conn.source.id) && !nodeIds.includes(conn.target.id)\n      );\n      setAppConnections(newConnections);\n      setModelOutput(undefined);\n\n      const newNodes = appNodes.filter((node) => !nodeIds.includes(node.id));\n      setAppNodes(newNodes);\n    },\n    [appConnections, appNodes, setAppConnections, setAppNodes, setModelOutput]\n  );\n\n  const updateConnections = useCallback(\n    (connsToUpdate: AppConnection[]) => {\n      const connIdsToUpdate = connsToUpdate.map((conn) => conn.id);\n      const oldConns = appConnections.filter(\n        (conn) => !connIdsToUpdate.includes(conn.id)\n      );\n      setAppConnections([...connsToUpdate, ...oldConns]);\n      setModelOutput(undefined);\n    },\n    [appConnections, setAppConnections, setModelOutput]\n  );\n\n  const deleteConnections = useCallback(\n    (connIds: string[]) => {\n      setAppConnections(\n        appConnections.filter((conn) => !connIds.includes(conn.id))\n      );\n      setModelOutput(undefined);\n    },\n    [appConnections, setAppConnections, setModelOutput]\n  );\n\n  const setActiveNodes = useCallback(\n    (activeNodeIds: string[]) => {\n      setAppNodes(\n        appNodes.map((node) => ({\n          ...node,\n          isActive: activeNodeIds.includes(node.id),\n        }))\n      );\n    },\n    [appNodes, setAppNodes]\n  );\n\n  const clearActiveNodes = useCallback(() => {\n    const anyActiveNodes = appNodes.find((node) => node.isActive) !== undefined;\n    if (anyActiveNodes) {\n      setAppNodes(\n        appNodes.map((node) => ({\n          ...node,\n          isActive: false,\n        }))\n      );\n    }\n  }, [appNodes, setAppNodes]);\n\n  return [\n    addNode,\n    addConnection,\n    updateNodes,\n    deleteNodes,\n    updateConnections,\n    deleteConnections,\n    setActiveNodes,\n    clearActiveNodes,\n  ];\n}\n","import React, { useEffect } from \"react\";\nimport { AppNode } from \"../App\";\n\nexport default function useKeyDown(\n  keyboardActive: boolean,\n  appNodes: AppNode[],\n  setAppNodes: (newNodes: AppNode[]) => void,\n  deleteNodes: (nodeIds: string[]) => void\n): void {\n  useEffect(() => {\n    const onKeyDown = (event: React.KeyboardEvent | KeyboardEvent) => {\n      if (keyboardActive) {\n        // meta + A makes all nodes active\n        if (event.metaKey && event.keyCode === 65) {\n          event.preventDefault();\n          setAppNodes(\n            appNodes.map((node) => {\n              return { ...node, isActive: true };\n            })\n          );\n        }\n\n        // delete active nodes on back/del\n        if (event.key === \"Backspace\" || event.key === \"Delete\") {\n          event.preventDefault();\n          deleteNodes(\n            appNodes.filter((node) => node.isActive).map((node) => node.id)\n          );\n        }\n\n        // escape key makes all inactive\n        if (event.keyCode === 27) {\n          setAppNodes(appNodes.map((node) => ({ ...node, isActive: false })));\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", onKeyDown);\n    return () => document.removeEventListener(\"keydown\", onKeyDown);\n  }, [appNodes, deleteNodes, keyboardActive, setAppNodes]);\n}\n","import React, { useCallback } from \"react\";\nimport { CanvasState } from \"../components/Canvas/Canvas\";\nimport {\n  determineRadius,\n  intersectsCircle,\n  mouseToNodeCoords,\n  rotatedDirection,\n} from \"../components/Canvas/canvasUtils\";\nimport { AppNode } from \"../App\";\nimport { getNewAppNode } from \"../utils/nodeConnectionUtils\";\nimport config from \"../config\";\n\nexport default function useDoubleClick(\n  appNodes: AppNode[],\n  addNode: (node: AppNode) => void,\n  updateNodes: (nodes: AppNode[]) => void\n): (event: React.MouseEvent | MouseEvent, canvasState: CanvasState) => void {\n  return useCallback(\n    (event: React.MouseEvent | MouseEvent, canvasState: CanvasState) => {\n      event.preventDefault();\n      if (event[config.multiSelectKey]) {\n        return;\n      }\n\n      const nodeCoordsOfMouse = mouseToNodeCoords(event, canvasState);\n\n      const doubleClickedNode = appNodes.find((node) => {\n        const nodeRadius = determineRadius(\n          node.capacitanceJPerDegK,\n          appNodes.map((node) => node.capacitanceJPerDegK)\n        );\n        return intersectsCircle(nodeCoordsOfMouse, node.center, nodeRadius);\n      });\n\n      if (doubleClickedNode) {\n        updateNodes([\n          {\n            ...doubleClickedNode,\n            textDirection: rotatedDirection(doubleClickedNode.textDirection),\n          },\n        ]);\n      } else {\n        const newAppNode = getNewAppNode(appNodes, nodeCoordsOfMouse);\n        addNode(newAppNode);\n      }\n    },\n    [addNode, appNodes, updateNodes]\n  );\n}\n","import { useLayoutEffect, useState } from \"react\";\n\nexport default function useWindowSize(): [[number, number], number] {\n  const [size, setSize] = useState<[number, number]>([0, 0]);\n  const [ratio, setRatio] = useState(1);\n\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight]);\n    }\n    function updateRatio() {\n      const { devicePixelRatio: ratio = 1 } = window;\n      setRatio(ratio);\n    }\n    window.addEventListener(\"resize\", updateSize);\n    window.addEventListener(\"resize\", updateRatio);\n    updateSize();\n    updateRatio();\n    return () => {\n      window.removeEventListener(\"resize\", updateSize);\n      window.removeEventListener(\"resize\", updateRatio);\n    };\n  }, []);\n  return [size, ratio];\n}\n","import * as React from \"react\";\nimport { useCallback, useRef } from \"react\";\nimport useClickAndDragElement from \"./useClickAndDragElement\";\nimport { AppState } from \"../App\";\n\nexport default function useResizablePanels(\n  setAppState: React.Dispatch<React.SetStateAction<AppState>>,\n  windowHeight: number,\n  windowWidth: number\n): [\n  React.MutableRefObject<null>,\n  (mouseDownEvent: MouseEvent | React.MouseEvent<Element, MouseEvent>) => void,\n  React.MutableRefObject<null>,\n  (mouseDownEvent: MouseEvent | React.MouseEvent<Element, MouseEvent>) => void,\n  React.MutableRefObject<null>,\n  (mouseDownEvent: MouseEvent | React.MouseEvent<Element, MouseEvent>) => void\n] {\n  const canvasPlotBorderRef = useRef(null);\n  const onDragYCanvasPlot = useCallback(\n    (deltaYPx: number) => {\n      setAppState((prevAppState) => ({\n        ...prevAppState,\n        panelSizes: {\n          ...prevAppState.panelSizes,\n          canvasHeightFraction:\n            prevAppState.panelSizes.canvasHeightFraction +\n            deltaYPx / windowHeight,\n        },\n      }));\n    },\n    [setAppState, windowHeight]\n  );\n  const onMouseDownOnCanvasPlotBorder = useClickAndDragElement({\n    onDragY: onDragYCanvasPlot,\n  });\n\n  const leftRightBorderRef = useRef(null);\n  const onDragXLeftRight = useCallback(\n    (deltaXPx: number) => {\n      setAppState((prevAppState) => ({\n        ...prevAppState,\n        panelSizes: {\n          ...prevAppState.panelSizes,\n          editorWidthFraction:\n            prevAppState.panelSizes.editorWidthFraction -\n            deltaXPx / windowWidth,\n        },\n      }));\n    },\n    [setAppState, windowWidth]\n  );\n  const onMouseDownOnLeftRightBorder = useClickAndDragElement({\n    onDragX: onDragXLeftRight,\n  });\n\n  const tableControlsBorderRef = useRef(null);\n  const onDragYTableControls = useCallback(\n    (deltaYPx: number) => {\n      setAppState((prevAppState) => ({\n        ...prevAppState,\n        panelSizes: {\n          ...prevAppState.panelSizes,\n          tableHeightFraction:\n            prevAppState.panelSizes.tableHeightFraction +\n            deltaYPx / windowHeight,\n        },\n      }));\n    },\n    [setAppState, windowHeight]\n  );\n  const onMouseDownOnTableControlsBorder = useClickAndDragElement({\n    onDragY: onDragYTableControls,\n  });\n\n  return [\n    canvasPlotBorderRef,\n    onMouseDownOnCanvasPlotBorder,\n    leftRightBorderRef,\n    onMouseDownOnLeftRightBorder,\n    tableControlsBorderRef,\n    onMouseDownOnTableControlsBorder,\n  ];\n}\n","export function forceShowScrollbars(): void {\n  // Returns whether scrollbars show up on scrollable elements.\n  // This is false on Macs when the \"General > Show scroll bars\" setting is\n  // not set to \"Always\" (the default is \"When scrolling\"). The approach\n  // taken here is to create an element that will scroll and then compare\n  // its outer width (including scrollbars) to its inner width (excluding\n  // scrollbars).\n  function areScrollbarsVisible() {\n    const scrollableElem = document.createElement(\"div\"),\n      innerElem = document.createElement(\"div\");\n    scrollableElem.style.width = \"30px\";\n    scrollableElem.style.height = \"30px\";\n    scrollableElem.style.overflow = \"scroll\";\n    scrollableElem.style.borderWidth = \"0\";\n    innerElem.style.width = \"30px\";\n    innerElem.style.height = \"60px\";\n    scrollableElem.appendChild(innerElem);\n    document.body.appendChild(scrollableElem); // Elements only have width if they're in the layout\n    const diff = scrollableElem.offsetWidth - scrollableElem.clientWidth;\n    document.body.removeChild(scrollableElem);\n    return diff > 0;\n  }\n\n  window.addEventListener(\"load\", function () {\n    // Show scrollbars if they're hidden.\n    if (!areScrollbarsVisible()) {\n      document.body.classList.add(\"force-show-scrollbars\");\n    }\n  });\n}\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { forceShowScrollbars } from \"./utils/scrollBar\";\n\nforceShowScrollbars();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}